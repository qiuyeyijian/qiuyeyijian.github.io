

# 网络层

MTU，最大传送单元。指的是IP数据报的最大总长度，也是数据链路层一个帧的数据部分的最大长度。一个帧数据部分大小范围为46-1500B。加上首部尾部，一个帧的大小范围为64-1518B。



## 分组交换

分组交换又可以进一步分为面向连接的虚电路和无连接的数据报方式。

![image-20211031161422568](assets/%E7%BD%91%E7%BB%9C%E5%B1%82/image-20211031161422568.png)

## IP多播

IANA拥有以太网地址块的高24位为`00-00-5E`，因此TCP/IP协议使用的以太网多播地址块范围为00-00-5E-00-00-00到00-00-5E-FF-FF-FF。

以太网硬件地址字段中的第一个字节的最低位为1即为多播地址，且这种多播地址占IANA（互联网号码指派管理局）**分配到的地址数的一半**（第24位为0的地址均分配给多播）。则以太网硬件多播地址范围为01-00-5E-00-00-00到01-00-5E-7F-FF-FF。

**由IP地址映射到硬件地址时，前0-23位为`01-00-5E`，第24位为`0`，剩下23位来自IP地址的低23位**

由于**IP多播地址与以太网硬件地址的映射关系不是唯一的**，因此收到多播数据报的主机还要在IP层利用软件过滤。

![image-20210919183810978](assets/%E7%BD%91%E7%BB%9C%E5%B1%82/image-20210919183810978.png)





## 变长子网与定长子网划分

CIDR是路由路由技术使用斜杠表示法进行路由聚合。

变长子网划分使用斜杠表示法将网络划分成大小不等的子网。一般**子网号**为：0，10，110, 1110，最后是全1。**注意子网全0和全可以使用，但主机号全0和全1一定不能使用。**题目中若使用斜杠表示法，或问最小子网，一般是使用变长子网划分。

定长子网使用子网掩码将网络划分成大小相等的子网。





## IPv6

IPv6使用**冒号十六进制记法**（colon hexadecimal notation，简写为colon hex），它把每个16位的值用十六进制表示，各值之间用冒号分隔。下面是它两个比较重要的特性：

> 冒号十六进制允许零压缩，即一连串连续的零可以使用双冒号取代。但是为了不引起歧义，**一个地址只允许使用一次零压缩**。如：`FF05::B3`
>
> **冒号十六进制可以结合点分十进制。**如：`::128.10.2.1`

| 地址类别     | 二进制前缀                             |
| ------------ | -------------------------------------- |
| 未指明地址   | `::/128`                               |
| 环回地址     | `::1/128`                              |
| 多播地址     | `FF00::/8`                             |
| 本地链路地址 | `FE80::/10`                            |
| 全球单播地址 | （除了上述四种外，所有其他二进制前缀） |



### IPv4 到 IPv6过渡

从IPv4向IPv6过渡过程中主要使用了**双协议栈和隧道技术**

**使用双协议栈技术会造成IPv6首部某些字段无法恢复，比如流标号**

![image-20211031150821341](assets/%E7%BD%91%E7%BB%9C%E5%B1%82/image-20211031150821341.png)

## SDN

SDN（Software Defined Network）即软件定义网络，是一种网络设计理念，或者一种推倒重来的设计思想。只要网络硬件可以集中式软件管理，可编程化，控制转发层面分开，则可以认为这个网络是一个SDN网络。所以说，SDN并不是一个具体的技术，不是一个具体的协议，而是一个思想、一个框架。狭义的SDN是指的“软件定义网络”，广义的SDN的概念还延伸出了：软件定义安全、软件定义存储等等。

**SDN是一种新型网络体系结构**，是一种设计、构建和管理网络的新方法和新概念，但不是一种新型物理网络。SDN的核心思想就是**把网络的控制层面和数据层面分离**，而让控制层面利用软件来控制数据层面中的许多设备。

**OpenFlow协议可被看成是在SDN体系结构中控制层面与数据层面之间的通信接口。**

在SDN的**广义转发**中，**完成“匹配+动作”的设备不局限于网络层工作**，因此不再称为路由器，而称为**“OpenFlow交换机”**或“分组交换机”，或更简单地称为“交换机”。相应地，在SDN中取代传统路由器中转发表的是**“流表（Flow Table）”**。

SDN特点：控制转发分离、集中式控制、可编程、开放接口、虚拟化。







## 内部网关协议

互联网的路由选择协议主要有两种，分别是RIP和OSPF。下面具体介绍这两种协议。

**先介绍RIP协议**：

- 路由信息协议（RIP） 是内部网关协议IGP中最先得到广泛使用的协议。RIP是一种分布式的基于距离矢量的路由选择协议，是因特网的标准协议，其最大优点就是实现简单，开销较小。
- 基本算法：矢量距离算法（简称V－D算法）的思想是：网关周期性地向外广播路径刷新报文，主要内容是由若干（V，D）序偶组成的序偶表；（V，D）序偶中的V代表“向量”，标识网关可到达的信宿（网关或主机），D代表距离，指出该网关去往信宿V的距离；距离D按驿站的个数计。其他网关收到某网关的（V，D）报文后，据此按照最短路径原则对各自的路由表进行刷新。
- 它只适用于小型的网络（15跳就达到极限），如果网络过于庞大，当网络出现故障时，要经过比较长的时间才能将此信息传送到所有的路由器。

**接下来说说什么是OSPF：**

- 基本定义：OSPF(Open Shortest Path First开放式最短路径优先）是一个内部网关协议(Interior Gateway Protocol，简称IGP），用于在单一自治系统（autonomous system,AS）内决策路由。
- 基本算法：迪克斯加算法。 主要是通过向邻居发送HELLO包来建立邻居关系，选取DR等。

参考文章：[计算机网络原理之RIP以及OSPF对比](https://blog.csdn.net/u013816144/article/details/50084793)









