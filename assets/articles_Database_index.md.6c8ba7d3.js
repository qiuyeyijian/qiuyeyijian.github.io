import{_ as s,o as a,c as n,O as l}from"./chunks/framework.4afe7240.js";const h=JSON.parse('{"title":"SQL基础","description":"","frontmatter":{},"headers":[],"relativePath":"articles/Database/index.md","filePath":"articles/Database/index.md"}'),e={name:"articles/Database/index.md"},t=l(`<h1 id="sql基础" tabindex="-1">SQL基础 <a class="header-anchor" href="#sql基础" aria-label="Permalink to &quot;SQL基础&quot;">​</a></h1><p>下面记录一下SQL的基础知识。</p><p>SQL是一门ANSI标准的计算机语言，虽然存在着不同版本的SQL语言，比如MySQL，Oracle，SQL Server等。但是，为了与ANSI标准兼容，他们必须以相似的方式共同来支持一些主要的命令，如SELECT、UPDATE、DELETE、INSERT、WHERE等。</p><p><strong>SQL数据库的表的字段名不要和SQL内置关键字一样，比如<code>password</code></strong></p><h2 id="认识sql" tabindex="-1">认识SQL <a class="header-anchor" href="#认识sql" aria-label="Permalink to &quot;认识SQL&quot;">​</a></h2><h3 id="定义" tabindex="-1">定义 <a class="header-anchor" href="#定义" aria-label="Permalink to &quot;定义&quot;">​</a></h3><blockquote><p><strong>Structured Query Language（SQL）：结构化查询语言</strong></p><p>其实就是定义了操作所有关系型数据库的规则。每一种数据库操作的方式存在不一样的地方，称为“方言”。</p></blockquote><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">1. SQL 语句可以单行或多行书写，以分号结尾。</span></span>
<span class="line"><span style="color:#A6ACCD;">2. 可使用空格和缩进来增强语句的可读性。</span></span>
<span class="line"><span style="color:#A6ACCD;">3. 一般数据库的 SQL 语句不区分大小写，关键字建议使用大写。</span></span>
<span class="line"><span style="color:#A6ACCD;">4. 注释</span></span>
<span class="line"><span style="color:#A6ACCD;">    单行注释: -- 注释内容 或 # 注释内容(mysql 特有) </span></span>
<span class="line"><span style="color:#A6ACCD;">    多行注释: /* 注释 */</span></span></code></pre></div><h3 id="标准" tabindex="-1">标准 <a class="header-anchor" href="#标准" aria-label="Permalink to &quot;标准&quot;">​</a></h3><p><strong>SQL是数据库沟通的语言标准，有3个主要标准：</strong></p><ul><li>ANSI SQL。对于ANSI SQL修改后在1992年采纳的标准成为SQL-92或者SQL2</li><li>SQL-99。从SQL-92扩充而来，增加了对象关系特征和许多其他新的功能。</li><li>各大数据库厂商提供不同版本的的SQL。这些版本SQL不但能包括原始的ANSI标准，而且能很大程度上支持新推出的SQL-92标准。</li></ul><h4 id="分类" tabindex="-1">分类 <a class="header-anchor" href="#分类" aria-label="Permalink to &quot;分类&quot;">​</a></h4><blockquote><ul><li><strong>DDL(Data Definition Language)数据定义语言</strong> 用来定义数据库对象：数据库，表，列等。关键字：create，drop，alter。</li><li><strong>DML(Data Manipulation Language)数据操作语言</strong> 用来对数据库中表的数据进行增删改。关键字：insert，delete，update。</li><li><strong>DQL(Data Query Language)数据查询语言</strong> 用来查询数据库中表的记录(数据)。关键字：select, where。</li><li><strong>DCL(Data Control Language)数据控制语言</strong> 用来定义数据库的访问权限和安全级别，及创建用户。grant，revoke，commit，rollback。</li></ul></blockquote><h2 id="ddl-操作数据库、表" tabindex="-1">DDL:操作数据库、表 <a class="header-anchor" href="#ddl-操作数据库、表" aria-label="Permalink to &quot;DDL:操作数据库、表&quot;">​</a></h2><h4 id="数据库-crud" tabindex="-1">数据库 CRUD <a class="header-anchor" href="#数据库-crud" aria-label="Permalink to &quot;数据库 CRUD&quot;">​</a></h4><p><strong>数据库创建（Create）</strong></p><div class="language-mysql"><button title="Copy Code" class="copy"></button><span class="lang">mysql</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">create database 数据库名称;						/*创建数据库*/</span></span>
<span class="line"><span style="color:#A6ACCD;">create database if not exists 数据库名称;		/*创建数据库，判断不存在，再创建*/</span></span>
<span class="line"><span style="color:#A6ACCD;">create database 数据库名称 character set 字符集名;	/*创建数据库，并指定字符集*/</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span>
<span class="line"><span style="color:#A6ACCD;">create database if not exists db4 character set gbk;	/*综合练习*/</span></span></code></pre></div><p><strong>数据库查询 （Retrieve）</strong></p><div class="language-mysql"><button title="Copy Code" class="copy"></button><span class="lang">mysql</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">show databases;						/*查询所有数据库的名称*/</span></span>
<span class="line"><span style="color:#A6ACCD;">show create database 数据库名称;		/*查询某个数据库的字符集:查询某个数据库的创建语句*/</span></span></code></pre></div><p><strong>数据库修改 （Update）</strong></p><div class="language-mysql"><button title="Copy Code" class="copy"></button><span class="lang">mysql</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">alter database 数据库名称 character set 字符集名称;		/*修改数据库的字符集*/</span></span></code></pre></div><p><strong>数据库删除 （Delete）</strong></p><div class="language-mysql"><button title="Copy Code" class="copy"></button><span class="lang">mysql</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">drop database 数据库名称;				/*删除数据库*/</span></span>
<span class="line"><span style="color:#A6ACCD;">drop database if exists 数据库名称;		/*判断数据库存在，如果存在再删除*/</span></span></code></pre></div><h4 id="数据库使用" tabindex="-1">数据库使用 <a class="header-anchor" href="#数据库使用" aria-label="Permalink to &quot;数据库使用&quot;">​</a></h4><div class="language-mysql"><button title="Copy Code" class="copy"></button><span class="lang">mysql</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">select database();				/*查询当前正在使用的数据库名称*/</span></span>
<span class="line"><span style="color:#A6ACCD;">use 数据库名称;					/*使用数据库*/</span></span></code></pre></div><h4 id="表操作-crud" tabindex="-1">表操作 CRUD <a class="header-anchor" href="#表操作-crud" aria-label="Permalink to &quot;表操作 CRUD&quot;">​</a></h4><p><strong>表创建（Create）</strong></p><div class="language-mysql"><button title="Copy Code" class="copy"></button><span class="lang">mysql</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">create table 表名(</span></span>
<span class="line"><span style="color:#A6ACCD;">    列名1 数据类型1,</span></span>
<span class="line"><span style="color:#A6ACCD;">    列名2 数据类型2,</span></span>
<span class="line"><span style="color:#A6ACCD;">    ....</span></span>
<span class="line"><span style="color:#A6ACCD;">    列名n 数据类型n</span></span>
<span class="line"><span style="color:#A6ACCD;">);					/*注意：最后一列，不需要加逗号（,）*/</span></span></code></pre></div><blockquote><ul><li><p>int：整数类型</p></li><li><p>double: 小数类型</p></li><li><p>date: 日期，只包含年月日，yyyy-MM-dd</p></li><li><p>datetime: 日期，包含年月日时分秒 yyyy-MM-dd HH:mm:ss</p></li><li><p>timestamp: 时间错类型 包含年月日时分秒 yyyy-MM-dd HH:mm:ss</p><p>如果将来不给这个字段赋值，或赋值为null，则默认使用当前的系统时间，来自动赋值</p></li><li><p>varchar：字符串</p></li></ul></blockquote><div class="language-mysql"><button title="Copy Code" class="copy"></button><span class="lang">mysql</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">/* 来个栗子 */</span></span>
<span class="line"><span style="color:#A6ACCD;">create table student(</span></span>
<span class="line"><span style="color:#A6ACCD;">    id int,</span></span>
<span class="line"><span style="color:#A6ACCD;">    name varchar(32),</span></span>
<span class="line"><span style="color:#A6ACCD;">    age int ,</span></span>
<span class="line"><span style="color:#A6ACCD;">    score double(4,1),				/* 一共4位，小数占1位，最大为999.9 */</span></span>
<span class="line"><span style="color:#A6ACCD;">    birthday date,</span></span>
<span class="line"><span style="color:#A6ACCD;">    insert_time timestamp</span></span>
<span class="line"><span style="color:#A6ACCD;">);</span></span></code></pre></div><div class="language-mysql"><button title="Copy Code" class="copy"></button><span class="lang">mysql</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">create table 表名 like 被复制的表名;	  		/*复制表*/</span></span></code></pre></div><p><strong>表查询 （Retrieve）</strong></p><div class="language-mysql"><button title="Copy Code" class="copy"></button><span class="lang">mysql</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">show tables;					  /*查询某个数据库中所有的表名称*/</span></span>
<span class="line"><span style="color:#A6ACCD;">desc 表名;						/*查询表结构*/</span></span></code></pre></div><p><strong>表修改 （Update）</strong></p><div class="language-mysql"><button title="Copy Code" class="copy"></button><span class="lang">mysql</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">alter table 表名 rename to 新的表名;				 /*修改表名*/</span></span>
<span class="line"><span style="color:#A6ACCD;">alter table 表名 character set 字符集名称;			/*修改表的字符集*/</span></span>
<span class="line"><span style="color:#A6ACCD;">alter table 表名 add 列名 数据类型;					/*添加一列*/</span></span>
<span class="line"><span style="color:#A6ACCD;">alter table 表名 change 列名 新列别 新数据类型;		 /*修改列名称 类型*/</span></span>
<span class="line"><span style="color:#A6ACCD;">alter table 表名 modify 列名 新数据类型;				/*只修改修改列类型*/</span></span>
<span class="line"><span style="color:#A6ACCD;">alter table 表名 drop 列名;							/*删除列*/</span></span></code></pre></div><p><strong>表删除 （Delete）</strong></p><div class="language-mysql"><button title="Copy Code" class="copy"></button><span class="lang">mysql</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">drop table 表名;</span></span>
<span class="line"><span style="color:#A6ACCD;">drop table if exists 表名 ;</span></span></code></pre></div><p>​</p><h2 id="dml-增删改表中数据" tabindex="-1">DML：增删改表中数据 <a class="header-anchor" href="#dml-增删改表中数据" aria-label="Permalink to &quot;DML：增删改表中数据&quot;">​</a></h2><h4 id="添加数据" tabindex="-1">添加数据 <a class="header-anchor" href="#添加数据" aria-label="Permalink to &quot;添加数据&quot;">​</a></h4><div class="language-mysql"><button title="Copy Code" class="copy"></button><span class="lang">mysql</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">insert into 表名(列名1,列名2,...列名n) values(值1,值2,...值n);</span></span></code></pre></div><blockquote><ul><li>列名和值要一一对应。</li><li>如果表名后，不定义列名，则默认给所有列添加值 <code>insert into 表名 values(值1,值2,...值n);</code></li><li><strong>除了数字类型，其他类型需要使用引号(单双都可以)引起来</strong></li></ul></blockquote><h4 id="删除数据" tabindex="-1">删除数据 <a class="header-anchor" href="#删除数据" aria-label="Permalink to &quot;删除数据&quot;">​</a></h4><div class="language-mysql"><button title="Copy Code" class="copy"></button><span class="lang">mysql</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">delete from 表名 [where 条件];</span></span></code></pre></div><blockquote><ul><li>如果不加条件，则删除表中所有记录。</li><li>如果要删除所有记录 <ul><li><code>delete from 表名; </code> -- 不推荐使用。有多少条记录就会执行多少次删除操</li><li><code>TRUNCATE TABLE 表名; </code> -- 推荐使用，效率更高 先删除表，然后再创建一张一样的表。</li></ul></li></ul></blockquote><h4 id="修改数据" tabindex="-1">修改数据 <a class="header-anchor" href="#修改数据" aria-label="Permalink to &quot;修改数据&quot;">​</a></h4><div class="language-mysql"><button title="Copy Code" class="copy"></button><span class="lang">mysql</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">update 表名 set 列名1 = 值1, 列名2 = 值2,... [where 条件];</span></span></code></pre></div><blockquote><p>如果不加任何条件，则会将表中所有记录全部修改。</p></blockquote><h2 id="dql-查询表中的记录" tabindex="-1">DQL：查询表中的记录 <a class="header-anchor" href="#dql-查询表中的记录" aria-label="Permalink to &quot;DQL：查询表中的记录&quot;">​</a></h2><div class="language-mysql"><button title="Copy Code" class="copy"></button><span class="lang">mysql</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">select * from 表名;			//查询表中所有数据</span></span></code></pre></div><p><strong>语法</strong></p><div class="language-mysql"><button title="Copy Code" class="copy"></button><span class="lang">mysql</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">select</span></span>
<span class="line"><span style="color:#A6ACCD;">	字段列表</span></span>
<span class="line"><span style="color:#A6ACCD;">from</span></span>
<span class="line"><span style="color:#A6ACCD;">	表名列表</span></span>
<span class="line"><span style="color:#A6ACCD;">where</span></span>
<span class="line"><span style="color:#A6ACCD;">	条件列表</span></span>
<span class="line"><span style="color:#A6ACCD;">group by</span></span>
<span class="line"><span style="color:#A6ACCD;">	分组字段</span></span>
<span class="line"><span style="color:#A6ACCD;">having</span></span>
<span class="line"><span style="color:#A6ACCD;">	分组之后的条件</span></span>
<span class="line"><span style="color:#A6ACCD;">order by</span></span>
<span class="line"><span style="color:#A6ACCD;">	排序</span></span>
<span class="line"><span style="color:#A6ACCD;">limit</span></span>
<span class="line"><span style="color:#A6ACCD;">	分页限定</span></span></code></pre></div><p>创建数据</p><div class="language-mysql"><button title="Copy Code" class="copy"></button><span class="lang">mysql</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">CREATE TABLE student  ( id int, 			/*编号*/</span></span>
<span class="line"><span style="color:#A6ACCD;">                       name varchar(20), 	/*姓名*/ </span></span>
<span class="line"><span style="color:#A6ACCD;">                       age int, 			/*年龄*/ </span></span>
<span class="line"><span style="color:#A6ACCD;">                       sex varchar(5), 		/*性别*/ </span></span>
<span class="line"><span style="color:#A6ACCD;">                       address varchar(100), /*地址*/ </span></span>
<span class="line"><span style="color:#A6ACCD;">                       math int, 			/*数学*/ </span></span>
<span class="line"><span style="color:#A6ACCD;">                       english int 			/*英语*/ </span></span>
<span class="line"><span style="color:#A6ACCD;">                      ); </span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span>
<span class="line"><span style="color:#A6ACCD;">INSERT INTO student (id,NAME,age,sex,address,math,english) </span></span>
<span class="line"><span style="color:#A6ACCD;">                       VALUES(1,&#39;马云&#39;,55,&#39;男&#39;,&#39;杭州&#39;,66,78),</span></span>
<span class="line"><span style="color:#A6ACCD;">                       (2,&#39;马化腾&#39;,45,&#39;女&#39;,&#39;深圳&#39;,98,87),</span></span>
<span class="line"><span style="color:#A6ACCD;">                       (3,&#39;马景涛&#39;,55,&#39;男&#39;,&#39;香港&#39;,56,77),</span></span>
<span class="line"><span style="color:#A6ACCD;">                       (4,&#39;柳岩&#39;,20,&#39;女&#39;,&#39;湖南&#39;,76,65),</span></span>
<span class="line"><span style="color:#A6ACCD;">                       (5,&#39;柳青&#39;,20,&#39;男&#39;,&#39;湖南&#39;,86,NULL),</span></span>
<span class="line"><span style="color:#A6ACCD;">                       (6,&#39;刘德华&#39;,57,&#39;男&#39;,&#39;香港&#39;,99,99),</span></span>
<span class="line"><span style="color:#A6ACCD;">                       (7,&#39;马德&#39;,22,&#39;女&#39;,&#39;香港&#39;,99,99),</span></span>
<span class="line"><span style="color:#A6ACCD;">                       (8,&#39;德玛西亚&#39;,18,&#39;男&#39;,&#39;南京&#39;,56,65);</span></span></code></pre></div><h4 id="基础查询" tabindex="-1">基础查询 <a class="header-anchor" href="#基础查询" aria-label="Permalink to &quot;基础查询&quot;">​</a></h4><div class="language-mysql"><button title="Copy Code" class="copy"></button><span class="lang">mysql</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">select 字段名1，字段名2... from 表名;	/*如果查询所有字段，则可以使用*来替代字段列表*/</span></span>
<span class="line"><span style="color:#A6ACCD;">select distinct 字段名1 from 表名;	/* 去除重复结果集 */</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span>
<span class="line"><span style="color:#A6ACCD;">/*</span></span>
<span class="line"><span style="color:#A6ACCD;">1. 如果null参与运算，那么结果为null。</span></span>
<span class="line"><span style="color:#A6ACCD;">2. 可以使用ifnull(null, 0),如果为null就替换成0;</span></span>
<span class="line"><span style="color:#A6ACCD;">3. as 可以用来起别名</span></span>
<span class="line"><span style="color:#A6ACCD;">*/</span></span>
<span class="line"><span style="color:#A6ACCD;">select name as 姓名, math as 数学, english as 英语, math+ifnull(english, 0) as 总分 from student;</span></span></code></pre></div><h4 id="条件查询" tabindex="-1">条件查询 <a class="header-anchor" href="#条件查询" aria-label="Permalink to &quot;条件查询&quot;">​</a></h4><p><strong>运算符</strong></p><table><thead><tr><th>比较运算符</th><th>说明</th></tr></thead><tbody><tr><td><code>&gt;, &lt;, &lt;=,&gt;=, =, &lt;&gt; </code></td><td><code>&lt;&gt;</code>在SQL中表示不等于，在mysql中也可以使用<code>!=</code>， 但是没有<code>==</code></td></tr><tr><td><code>between...and</code></td><td>在一个范围之内，如：<code>between 100 and 200</code>，相当于[100, 200]</td></tr><tr><td><code>in(集合)</code></td><td>集合表示多个值，用逗号分隔</td></tr><tr><td><code>like&quot;张%&quot;</code></td><td>模糊查询</td></tr><tr><td><code>is null</code></td><td>查询某一列为null的值，不能写<code>=null</code></td></tr><tr><td><code>is no null</code></td><td>查询某一列不是null的值，不能写做<code>!=null</code></td></tr></tbody></table><div class="language-mysql"><button title="Copy Code" class="copy"></button><span class="lang">mysql</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">-- 查询math分数大于80分的学生</span></span>
<span class="line"><span style="color:#A6ACCD;">select * from student3 where math&gt;80;</span></span>
<span class="line"><span style="color:#A6ACCD;">-- 查询english分数小于或等于80分的学生</span></span>
<span class="line"><span style="color:#A6ACCD;">select * from student3 where english &lt;=80;</span></span>
<span class="line"><span style="color:#A6ACCD;">-- 查询age等于20岁的学生</span></span>
<span class="line"><span style="color:#A6ACCD;">select * from student3 where age = 20;</span></span>
<span class="line"><span style="color:#A6ACCD;">-- 查询age不等于20岁的学生，注：不等于有两种写法</span></span>
<span class="line"><span style="color:#A6ACCD;">select * from student3 where age &lt;&gt; 20;</span></span>
<span class="line"><span style="color:#A6ACCD;">select * from student3 where age != 20;</span></span>
<span class="line"><span style="color:#A6ACCD;">-- 查询age为空的学生</span></span>
<span class="line"><span style="color:#A6ACCD;">select * from student3 where age is null;</span></span></code></pre></div><p><strong>逻辑运算符</strong></p><table><thead><tr><th>逻辑运算符</th><th>说明</th></tr></thead><tbody><tr><td><code>and</code>或者 <code>&amp;&amp;</code></td><td>与，SQL中建议使用前者，后者不通用</td></tr><tr><td><code>or</code>或者 \`</td><td></td></tr><tr><td><code>not</code>或者 <code>!</code></td><td>非</td></tr></tbody></table><div class="language-mysql"><button title="Copy Code" class="copy"></button><span class="lang">mysql</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">-- 查询age大于35且性别为男的学生(两个条件同时满足)</span></span>
<span class="line"><span style="color:#A6ACCD;">select * from student3 where age&gt;35 and sex=&#39;男&#39;;</span></span>
<span class="line"><span style="color:#A6ACCD;">-- 查询age大于35或性别为男的学生(两个条件其中一个满足)</span></span>
<span class="line"><span style="color:#A6ACCD;">select * from student3 where age&gt;35 or sex=&#39;男&#39;;</span></span>
<span class="line"><span style="color:#A6ACCD;">-- 查询id是1或3或5的学生</span></span>
<span class="line"><span style="color:#A6ACCD;">select * from student3 where id=1 or id=3 or id=5;</span></span></code></pre></div><p><strong>in 关键字</strong></p><table><thead><tr><th>select 字段名 from 表名 where 字段 in (数据1， 数据2，...);</th></tr></thead><tbody><tr><td>in里面的每个数据都会作为一次条件，只要满足条件的就会显示</td></tr></tbody></table><div class="language-mysql"><button title="Copy Code" class="copy"></button><span class="lang">mysql</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">-- 查询id是1或3或5的学生</span></span>
<span class="line"><span style="color:#A6ACCD;">select * from student3 where id in(1,3,5);</span></span>
<span class="line"><span style="color:#A6ACCD;">-- 查询id不是1或3或5的学生</span></span>
<span class="line"><span style="color:#A6ACCD;">select * from student3 where id not in(1,3,5);</span></span></code></pre></div><p><strong>Exists查询</strong></p><blockquote><ol><li>先执行外层SQL</li><li>将外层SQL的结果集循环传入内层</li><li>如果内层sql有返回结果，就将外层的当前结果加入查询结果集</li></ol></blockquote><p><strong>exists与子查询区别？</strong></p><ol><li>子查询先执行内层sql，结果传到外层</li><li>exists先执行外层，结果传到内层</li></ol><p><strong>范围查询</strong></p><table><thead><tr><th>between 值1 and 值2</th></tr></thead><tbody><tr><td>表示从值1到值2范围，包含头部和尾部</td></tr><tr><td>比如： <code>age between 80 and 100</code>，相当于： <code>age &gt;= 80 &amp;&amp; age &lt;= 100</code></td></tr></tbody></table><div class="language-mysql"><button title="Copy Code" class="copy"></button><span class="lang">mysql</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">-- 查询english成绩大于等于75，且小于等于90的学生</span></span>
<span class="line"><span style="color:#A6ACCD;">select * from student3 where english between 75 and 90;</span></span></code></pre></div><p><strong>like 关键字</strong></p><table><thead><tr><th>like表示模糊查询</th></tr></thead><tbody><tr><td><code>select * from 表名 where 字段名 like &quot;通配符字符串&quot;</code>;</td></tr></tbody></table><p><strong>Mysql 通配符</strong></p><table><thead><tr><th>通配符</th><th>说明</th></tr></thead><tbody><tr><td><code>%</code></td><td>匹配任意多个字符串</td></tr><tr><td><code>_</code> （一个下划线）</td><td>匹配一个字符</td></tr></tbody></table><div class="language-mysql"><button title="Copy Code" class="copy"></button><span class="lang">mysql</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">-- 查询姓马的学生</span></span>
<span class="line"><span style="color:#A6ACCD;">select * from student3 where name like &#39;马%&#39;;</span></span>
<span class="line"><span style="color:#A6ACCD;">select * from student3 where name like &#39;马&#39;;</span></span>
<span class="line"><span style="color:#A6ACCD;">-- 查询姓名中包含&#39;德&#39;字的学生</span></span>
<span class="line"><span style="color:#A6ACCD;">select * from student3 where name like &#39;%德%&#39;;</span></span>
<span class="line"><span style="color:#A6ACCD;">-- 查询姓马，且姓名有两个字的学生</span></span>
<span class="line"><span style="color:#A6ACCD;">select * from student3 where name like &#39;马_&#39;;</span></span></code></pre></div><h4 id="排序查询" tabindex="-1">排序查询 <a class="header-anchor" href="#排序查询" aria-label="Permalink to &quot;排序查询&quot;">​</a></h4><table><thead><tr><th>order by 排序字段1 排序方式1 ， 排序字段2 排序方式2...</th></tr></thead><tbody><tr><td><code>select * from student order by math asc;</code></td></tr></tbody></table><blockquote><p>如果有多个排序条件，则当前边的条件值一样时，才会判断第二条件。</p><ul><li><p>ASC：升序，默认的。</p></li><li><p>DESC：降序。</p></li></ul></blockquote><div class="language-mysql"><button title="Copy Code" class="copy"></button><span class="lang">mysql</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">/* 按照数学成绩排名，如果数学成绩一样，则按照英语成绩排名*/</span></span>
<span class="line"><span style="color:#A6ACCD;">select * from student order by math asc, english desc;</span></span></code></pre></div><h4 id="聚合函数" tabindex="-1">聚合函数 <a class="header-anchor" href="#聚合函数" aria-label="Permalink to &quot;聚合函数&quot;">​</a></h4><table><thead><tr><th>函数名称</th><th>说明</th></tr></thead><tbody><tr><td>count</td><td>计算个数，一般选择非空的列：主键。count(*)计算所有个数，包含null</td></tr><tr><td>max</td><td>计算最大值</td></tr><tr><td>min</td><td>计算最小值</td></tr><tr><td>sum</td><td>计算和</td></tr><tr><td>avg</td><td>计算平均值</td></tr></tbody></table><blockquote><p>注意：<strong>聚合函数的计算，排除null值。</strong></p><p>解决方案：</p><ol><li>选择不包含非空的列进行计算</li><li>IFNULL函数</li></ol></blockquote><div class="language-mysql"><button title="Copy Code" class="copy"></button><span class="lang">mysql</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">SELECT COUNT(ifnull(english, 0)) FROM student;</span></span>
<span class="line"><span style="color:#A6ACCD;">SELECT MAX(math) FROM student;</span></span>
<span class="line"><span style="color:#A6ACCD;">SELECT AVG(english) FROM student;</span></span></code></pre></div><h4 id="分组查询" tabindex="-1">分组查询 <a class="header-anchor" href="#分组查询" aria-label="Permalink to &quot;分组查询&quot;">​</a></h4><blockquote><p><strong>分组之后查询的字段：分组字段、聚合函数</strong></p></blockquote><table><thead><tr><th>group by 分组字段;</th></tr></thead><tbody><tr><td></td></tr></tbody></table><div class="language-mysql"><button title="Copy Code" class="copy"></button><span class="lang">mysql</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">-- 按照性别分组。分别查询男、女同学的平均分</span></span>
<span class="line"><span style="color:#A6ACCD;">SELECT sex , AVG(math) FROM student GROUP BY sex;</span></span>
<span class="line"><span style="color:#A6ACCD;">-- 按照性别分组。分别查询男、女同学的平均分,人数</span></span>
<span class="line"><span style="color:#A6ACCD;">SELECT sex , AVG(math),COUNT(id) FROM student GROUP BY sex;</span></span>
<span class="line"><span style="color:#A6ACCD;">--  按照性别分组。分别查询男、女同学的平均分,人数 要求：分数低于70分的人，不参与分组</span></span>
<span class="line"><span style="color:#A6ACCD;">SELECT sex , AVG(math),COUNT(id) FROM student WHERE math &gt; 70 GROUP BY sex;</span></span>
<span class="line"><span style="color:#A6ACCD;">--  按照性别分组。分别查询男、女同学的平均分,人数 要求：分数低于70分的人，不参与分组,分组之后。人数要大于2个人</span></span>
<span class="line"><span style="color:#A6ACCD;">SELECT sex , AVG(math),COUNT(id) FROM student WHERE math &gt; 70 GROUP BY sex HAVING COUNT(id) &gt; 2;</span></span>
<span class="line"><span style="color:#A6ACCD;">SELECT sex , AVG(math),COUNT(id) 人数 FROM student WHERE math &gt; 70 GROUP BY sex HAVING 人数 &gt; 2;</span></span></code></pre></div><p><strong>where 和 having 的区别</strong></p><blockquote><ol><li><p>where 在分组之前进行限定，如果不满足条件，则不参与分组。having在分组之后进行限定，如果不满足结果，则不会被查询出来</p></li><li><p>where 后不可以跟聚合函数，having可以进行聚合函数的判断。</p></li></ol></blockquote><p>​</p><h4 id="分页查询" tabindex="-1">分页查询 <a class="header-anchor" href="#分页查询" aria-label="Permalink to &quot;分页查询&quot;">​</a></h4><table><thead><tr><th>limit 开始的索引,每页查询的条数;</th></tr></thead><tbody><tr><td>开始的索引 = （当前的页码 - 1） * 每页显示的条数</td></tr></tbody></table><p><strong>limit 是一个MySQL&quot;方言&quot;</strong></p><div class="language-mysql"><button title="Copy Code" class="copy"></button><span class="lang">mysql</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">-- 每页显示3条记录 </span></span>
<span class="line"><span style="color:#A6ACCD;">SELECT * FROM student LIMIT 0,3; -- 第1页			//第0，1, 2条记录</span></span>
<span class="line"><span style="color:#A6ACCD;">SELECT * FROM student LIMIT 3,3; -- 第2页			//第3, 4, 5 条记录</span></span>
<span class="line"><span style="color:#A6ACCD;">SELECT * FROM student LIMIT 6,3; -- 第3页			//第6，7, 8条记录</span></span></code></pre></div><h2 id="约束" tabindex="-1">约束 <a class="header-anchor" href="#约束" aria-label="Permalink to &quot;约束&quot;">​</a></h2><blockquote><p>约束：对表中的数据进行限定，保证数据的正确性、有效性和完整性。</p><ol><li>主键约束：primary key</li><li>非空约束：not null</li><li>唯一约束：unique</li><li>外键约束：foreign key</li></ol></blockquote><h4 id="非空约束-not-null" tabindex="-1">非空约束：not null <a class="header-anchor" href="#非空约束-not-null" aria-label="Permalink to &quot;非空约束：not null&quot;">​</a></h4><blockquote><p>值不能为null</p></blockquote><ol><li><p>创建表时添加约束</p><div class="language-mysql"><button title="Copy Code" class="copy"></button><span class="lang">mysql</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">CREATE TABLE stu(</span></span>
<span class="line"><span style="color:#A6ACCD;">		id INT,</span></span>
<span class="line"><span style="color:#A6ACCD;">		NAME VARCHAR(20) NOT NULL -- name为非空</span></span>
<span class="line"><span style="color:#A6ACCD;">);</span></span></code></pre></div></li><li><p>创建表完后，添加非空约束</p><div class="language-mysql"><button title="Copy Code" class="copy"></button><span class="lang">mysql</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">ALTER TABLE stu MODIFY NAME VARCHAR(20) NOT NULL;</span></span></code></pre></div></li><li><p>删除name的非空约束</p><div class="language-mysql"><button title="Copy Code" class="copy"></button><span class="lang">mysql</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">ALTER TABLE stu MODIFY NAME VARCHAR(20);</span></span></code></pre></div></li></ol><h4 id="唯一约束-unique" tabindex="-1">唯一约束：unique <a class="header-anchor" href="#唯一约束-unique" aria-label="Permalink to &quot;唯一约束：unique&quot;">​</a></h4><blockquote><p>值不能重复</p></blockquote><ol><li><p>创建表时，添加唯一约束</p><p>注意mysql中，唯一约束限定的列的值可以有多个null</p><div class="language-mysql"><button title="Copy Code" class="copy"></button><span class="lang">mysql</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">CREATE TABLE stu(</span></span>
<span class="line"><span style="color:#A6ACCD;">	id INT,</span></span>
<span class="line"><span style="color:#A6ACCD;">	phone_number VARCHAR(20) UNIQUE -- 添加了唯一约束</span></span>
<span class="line"><span style="color:#A6ACCD;">);</span></span></code></pre></div></li><li><p>删除唯一约束</p><div class="language-mysql"><button title="Copy Code" class="copy"></button><span class="lang">mysql</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">ALTER TABLE stu DROP INDEX phone_number;</span></span></code></pre></div></li><li><p>在创建表后，添加唯一约束</p><div class="language-mysql"><button title="Copy Code" class="copy"></button><span class="lang">mysql</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">ALTER TABLE stu MODIFY phone_number VARCHAR(20) UNIQUE;</span></span></code></pre></div></li></ol><h4 id="主键约束-primary-key" tabindex="-1">主键约束：primary key <a class="header-anchor" href="#主键约束-primary-key" aria-label="Permalink to &quot;主键约束：primary key&quot;">​</a></h4><blockquote><p>注意：</p><ol><li>含义：非空且唯一</li><li>一张表只能有一个字段为主键</li><li>主键就是表中记录的唯一标识</li></ol></blockquote><ol><li><p>在创建表时，添加主键约束</p><div class="language-mysql"><button title="Copy Code" class="copy"></button><span class="lang">mysql</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">create table stu(</span></span>
<span class="line"><span style="color:#A6ACCD;">	id int primary key,-- 给id添加主键约束</span></span>
<span class="line"><span style="color:#A6ACCD;">	name varchar(20)</span></span>
<span class="line"><span style="color:#A6ACCD;">);</span></span></code></pre></div></li><li><p>删除主键</p><div class="language-mysql"><button title="Copy Code" class="copy"></button><span class="lang">mysql</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">-- 错误 alter table stu modify id int ;</span></span>
<span class="line"><span style="color:#A6ACCD;">ALTER TABLE stu DROP PRIMARY KEY;</span></span></code></pre></div></li><li><p>创建完表后，添加主键</p><div class="language-mysql"><button title="Copy Code" class="copy"></button><span class="lang">mysql</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">ALTER TABLE stu MODIFY id INT PRIMARY KEY;</span></span></code></pre></div></li><li><p>自动增长：</p></li></ol><blockquote><p>概念：如果某一列是数值类型的，使用 auto_increment 可以来完成值得自动增长</p></blockquote><div class="language-mysql"><button title="Copy Code" class="copy"></button><span class="lang">mysql</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">/*在创建表时，添加主键约束，并且完成主键自增长*/</span></span>
<span class="line"><span style="color:#A6ACCD;">	create table stu(</span></span>
<span class="line"><span style="color:#A6ACCD;">		id int primary key auto_increment,-- 给id添加主键约束</span></span>
<span class="line"><span style="color:#A6ACCD;">		name varchar(20)</span></span>
<span class="line"><span style="color:#A6ACCD;">	);</span></span>
<span class="line"><span style="color:#A6ACCD;">	</span></span>
<span class="line"><span style="color:#A6ACCD;">/*删除自动增长*/</span></span>
<span class="line"><span style="color:#A6ACCD;">ALTER TABLE stu MODIFY id INT;</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span>
<span class="line"><span style="color:#A6ACCD;">/*添加自动增长*/</span></span>
<span class="line"><span style="color:#A6ACCD;">ALTER TABLE stu MODIFY id INT AUTO_INCREMENT;</span></span></code></pre></div><h4 id="外键约束-foreign-key" tabindex="-1">外键约束：foreign key <a class="header-anchor" href="#外键约束-foreign-key" aria-label="Permalink to &quot;外键约束：foreign key&quot;">​</a></h4><blockquote><p>让表与表产生关系，从而保证数据的正确性</p></blockquote><ol><li><p>在创建表时，可以添加外键</p><div class="language-mysql"><button title="Copy Code" class="copy"></button><span class="lang">mysql</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">create table 表名(</span></span>
<span class="line"><span style="color:#A6ACCD;">	....</span></span>
<span class="line"><span style="color:#A6ACCD;">	外键列</span></span>
<span class="line"><span style="color:#A6ACCD;">	constraint 外键名称 foreign key (外键列名称) references 主表名称(主表列名称)</span></span>
<span class="line"><span style="color:#A6ACCD;">);</span></span></code></pre></div></li><li><p>删除外键</p><div class="language-mysql"><button title="Copy Code" class="copy"></button><span class="lang">mysql</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">ALTER TABLE 表名 DROP FOREIGN KEY 外键名称;</span></span></code></pre></div></li><li><p>创建表之后，添加外键</p><div class="language-mysql"><button title="Copy Code" class="copy"></button><span class="lang">mysql</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">ALTER TABLE 表名 ADD CONSTRAINT 外键名称 FOREIGN KEY (外键字段名称) REFERENCES 主表名称(主表列名称);</span></span></code></pre></div></li><li><p>级联操作</p><div class="language-mysql"><button title="Copy Code" class="copy"></button><span class="lang">mysql</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">ALTER TABLE 表名 ADD CONSTRAINT 外键名称 </span></span>
<span class="line"><span style="color:#A6ACCD;">			FOREIGN KEY (外键字段名称) REFERENCES 主表名称(主表列名称) ON UPDATE CASCADE ON DELETE CASCADE  ;</span></span>
<span class="line"><span style="color:#A6ACCD;">			</span></span>
<span class="line"><span style="color:#A6ACCD;">			</span></span>
<span class="line"><span style="color:#A6ACCD;">-- 级联更新：ON UPDATE CASCADE </span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span>
<span class="line"><span style="color:#A6ACCD;">-- 级联删除：ON DELETE CASCADE</span></span></code></pre></div></li></ol><h2 id="视图" tabindex="-1">视图 <a class="header-anchor" href="#视图" aria-label="Permalink to &quot;视图&quot;">​</a></h2><blockquote><p>视图是从一个或多个表（或视图）导出的表，它是一个虚拟表。数据库中只存放视图的定义，而不存放视图对应数据，这些数据仍然存放在原来的基本表中。在对视图的数据进行操作时，系统根据视图的定义去操作与视图相关联的基本表。</p></blockquote><p>视图一旦一定义，就可以和基本表一样被查询、被删除。也可以在一个视图之上再定义新的视图，但对视图的更新（增、删、改）操作则有一定的限制。</p><p>视图的作用：</p><p>**简单化：**用户常用的操作不必每次都指定全部条件</p><p>**安全性：**用户只能查询和修改他们所能见到的数据</p><p>**独立性：**视图可以帮助用户屏蔽真实表结构变化带来的影响</p><p>视图能够简化用户的操作、使用户能以多种角度看待同一数据、对重构数据库提供了一定程度的逻辑独立性、能够对机密数据提供安全保护。</p><h3 id="创建视图" tabindex="-1">创建视图 <a class="header-anchor" href="#创建视图" aria-label="Permalink to &quot;创建视图&quot;">​</a></h3><p>创建视图使用<code>create view</code>语句，基本语法如下</p><div class="language-sql"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#F78C6C;">create</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">view</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">视图名</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">as</span><span style="color:#A6ACCD;"> 子查询语句;</span></span></code></pre></div><div class="language-sql"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#F78C6C;">create</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">table</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">tb_1</span><span style="color:#A6ACCD;">(</span></span>
<span class="line"><span style="color:#A6ACCD;">	id </span><span style="color:#C792EA;">number</span><span style="color:#A6ACCD;">(</span><span style="color:#F78C6C;">10</span><span style="color:#A6ACCD;">),</span></span>
<span class="line"><span style="color:#A6ACCD;">    quantity </span><span style="color:#C792EA;">number</span><span style="color:#A6ACCD;">(</span><span style="color:#F78C6C;">9</span><span style="color:#A6ACCD;">),</span></span>
<span class="line"><span style="color:#A6ACCD;">    price </span><span style="color:#C792EA;">number</span><span style="color:#A6ACCD;">(</span><span style="color:#F78C6C;">9</span><span style="color:#A6ACCD;">)</span></span>
<span class="line"><span style="color:#A6ACCD;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F78C6C;">create</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">view</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">view_t1</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">as</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">select</span><span style="color:#A6ACCD;"> id, quantity, price </span><span style="color:#F78C6C;">from</span><span style="color:#A6ACCD;"> tb_1;	</span><span style="color:#676E95;font-style:italic;">-- 创建视图</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">-- 创建视图的时候重新命名字段，屏蔽真实字段名，起到安全保护作用</span></span>
<span class="line"><span style="color:#F78C6C;">create</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">view</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">view_t2</span><span style="color:#A6ACCD;">(id, qty, price) </span><span style="color:#F78C6C;">as</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">select</span><span style="color:#A6ACCD;"> id, quantity, price </span><span style="color:#F78C6C;">from</span><span style="color:#A6ACCD;"> tb_1;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F78C6C;">select</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">*</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">from</span><span style="color:#A6ACCD;"> view_t1;		</span><span style="color:#676E95;font-style:italic;">-- 对刚刚创建的视图进行查询操作</span></span></code></pre></div><p><strong>在多表上创建视图</strong></p><div class="language-sql"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#F78C6C;">create</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">table</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">student</span><span style="color:#A6ACCD;">(</span></span>
<span class="line"><span style="color:#A6ACCD;">	s_id </span><span style="color:#C792EA;">number</span><span style="color:#A6ACCD;">(</span><span style="color:#F78C6C;">9</span><span style="color:#A6ACCD;">),</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F78C6C;">name</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">varchar</span><span style="color:#A6ACCD;">(</span><span style="color:#F78C6C;">40</span><span style="color:#A6ACCD;">)</span></span>
<span class="line"><span style="color:#A6ACCD;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F78C6C;">create</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">table</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">student</span><span style="color:#A6ACCD;">(</span></span>
<span class="line"><span style="color:#A6ACCD;">	s_id </span><span style="color:#C792EA;">number</span><span style="color:#A6ACCD;">(</span><span style="color:#F78C6C;">9</span><span style="color:#A6ACCD;">),</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F78C6C;">name</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">varchar</span><span style="color:#A6ACCD;">(</span><span style="color:#F78C6C;">40</span><span style="color:#A6ACCD;">),</span></span>
<span class="line"><span style="color:#A6ACCD;">    glass </span><span style="color:#C792EA;">varchar</span><span style="color:#A6ACCD;">(</span><span style="color:#F78C6C;">40</span><span style="color:#A6ACCD;">),</span></span>
<span class="line"><span style="color:#A6ACCD;">    addr </span><span style="color:#C792EA;">varchar</span><span style="color:#A6ACCD;">(</span><span style="color:#F78C6C;">20</span><span style="color:#A6ACCD;">)</span></span>
<span class="line"><span style="color:#A6ACCD;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F78C6C;">create</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">view</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">stu_glass</span><span style="color:#A6ACCD;">(id, </span><span style="color:#F78C6C;">name</span><span style="color:#A6ACCD;">, glass) </span></span>
<span class="line"><span style="color:#F78C6C;">as</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">select</span><span style="color:#A6ACCD;"> student.s_id, student.name, stu_info.glass </span></span>
<span class="line"><span style="color:#F78C6C;">from</span><span style="color:#A6ACCD;"> student, stu_info</span></span>
<span class="line"><span style="color:#F78C6C;">where</span><span style="color:#A6ACCD;"> student.s_id </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> stu_info.s_id;		</span><span style="color:#676E95;font-style:italic;">-- 可以看到，视图很好地保护了基本表的结构</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color:#F78C6C;">select</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">*</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">from</span><span style="color:#A6ACCD;"> stu_glass;		</span><span style="color:#676E95;font-style:italic;">-- 查询刚刚创建的视图</span></span>
<span class="line"><span style="color:#F78C6C;">desc</span><span style="color:#A6ACCD;"> stu_glass;		</span><span style="color:#676E95;font-style:italic;">--查看视图结构</span></span></code></pre></div><h3 id="修改视图" tabindex="-1">修改视图 <a class="header-anchor" href="#修改视图" aria-label="Permalink to &quot;修改视图&quot;">​</a></h3><div class="language-sql"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;">-- 如果存在视图就修改，没有就创建</span></span>
<span class="line"><span style="color:#F78C6C;">create or replace</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">view</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">view_t1</span><span style="color:#A6ACCD;">(id, quty, pri) </span><span style="color:#F78C6C;">as</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">select</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">*</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">from</span><span style="color:#A6ACCD;"> tb_1;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">-- 修改视图的约束</span></span>
<span class="line"><span style="color:#F78C6C;">alter</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">view</span><span style="color:#A6ACCD;"> view_t1</span></span>
<span class="line"><span style="color:#F78C6C;">add</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">constraint</span><span style="color:#A6ACCD;"> unq_t </span><span style="color:#F78C6C;">unique</span><span style="color:#A6ACCD;">(quty)</span></span>
<span class="line"><span style="color:#F78C6C;">disable</span><span style="color:#A6ACCD;"> novalidate;		</span><span style="color:#676E95;font-style:italic;">-- 以前数据和以后数据都不检查</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">-- 删除视图的约束</span></span>
<span class="line"><span style="color:#F78C6C;">alter</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">view</span><span style="color:#A6ACCD;"> view_t1</span></span>
<span class="line"><span style="color:#F78C6C;">drop</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">constraint</span><span style="color:#A6ACCD;"> unq_t;</span></span></code></pre></div><h3 id="更新视图" tabindex="-1">更新视图 <a class="header-anchor" href="#更新视图" aria-label="Permalink to &quot;更新视图&quot;">​</a></h3><p>更新视图所使用的命令：<code>update</code>， <code>insert</code> ，<code>delete</code>和操作表名一样，因为视图不会存储具体数据，所以对视图的操作都会转化成对表的操作。</p><div class="language-sql"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#F78C6C;">update</span><span style="color:#A6ACCD;"> view_t1 </span><span style="color:#F78C6C;">set</span><span style="color:#A6ACCD;"> quty</span><span style="color:#89DDFF;">=</span><span style="color:#F78C6C;">5</span><span style="color:#A6ACCD;">;</span></span>
<span class="line"><span style="color:#F78C6C;">insert into</span><span style="color:#A6ACCD;"> view_t1 vlaues(</span><span style="color:#F78C6C;">1</span><span style="color:#A6ACCD;">, </span><span style="color:#F78C6C;">3</span><span style="color:#A6ACCD;">, </span><span style="color:#F78C6C;">5</span><span style="color:#A6ACCD;">);</span></span>
<span class="line"><span style="color:#F78C6C;">delete</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">from</span><span style="color:#A6ACCD;"> view_t1 </span><span style="color:#F78C6C;">where</span><span style="color:#A6ACCD;"> price</span><span style="color:#89DDFF;">=</span><span style="color:#F78C6C;">10</span><span style="color:#A6ACCD;">;</span></span></code></pre></div><h3 id="删除视图" tabindex="-1">删除视图 <a class="header-anchor" href="#删除视图" aria-label="Permalink to &quot;删除视图&quot;">​</a></h3><div class="language-sql"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#F78C6C;">drop</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">view</span><span style="color:#A6ACCD;"> view_name;</span></span></code></pre></div><h3 id="限制视图的数据操作" tabindex="-1">限制视图的数据操作 <a class="header-anchor" href="#限制视图的数据操作" aria-label="Permalink to &quot;限制视图的数据操作&quot;">​</a></h3><div class="language-sql"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#F78C6C;">create</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">view</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">view_t2</span><span style="color:#A6ACCD;">(id, qty, price) </span><span style="color:#F78C6C;">as</span><span style="color:#A6ACCD;"> </span></span>
<span class="line"><span style="color:#F78C6C;">select</span><span style="color:#A6ACCD;"> id, quantity, price </span><span style="color:#F78C6C;">from</span><span style="color:#A6ACCD;"> tb_1</span></span>
<span class="line"><span style="color:#F78C6C;">with</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">read</span><span style="color:#A6ACCD;"> only;		</span><span style="color:#676E95;font-style:italic;">--  设置视图只读</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F78C6C;">create</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">view</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">view_t2</span><span style="color:#A6ACCD;">(id, qty, price) </span><span style="color:#F78C6C;">as</span><span style="color:#A6ACCD;"> </span></span>
<span class="line"><span style="color:#F78C6C;">select</span><span style="color:#A6ACCD;"> id, quantity, price </span><span style="color:#F78C6C;">from</span><span style="color:#A6ACCD;"> tb_1</span></span>
<span class="line"><span style="color:#F78C6C;">where</span><span style="color:#A6ACCD;"> price </span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">10</span></span>
<span class="line"><span style="color:#F78C6C;">with</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">check</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">option</span><span style="color:#A6ACCD;">;		</span><span style="color:#676E95;font-style:italic;">-- 设置视图插入，删除，更新操作时检查</span></span></code></pre></div><h2 id="事务" tabindex="-1">事务 <a class="header-anchor" href="#事务" aria-label="Permalink to &quot;事务&quot;">​</a></h2><blockquote><p>事务用于保证数据的一致性，它由一组相关的DML语句组成，该组的DML语句要么全部成功，要么全部失败。</p></blockquote><p>事务作为单个逻辑工作单元执行的一系列操作，具有4个特性：</p><p>**原子性（Atomicity）：**事务是一个完整的操作。事务的各个操作是不可分的；要么都执行，要么都不执行。</p><p>**一致性（Consistency）：**一个查询的结果必须与数据库在查询开始的状态保持一致（读不等待写，写不等待读）。</p><p>**隔离性（Isolation）：**对于其他会话来说，未完成的（也就是未提交的）事务必须不可见。</p><p>**持久性（Durability）：**事务一旦提交完成后，数据库就不可以丢失这个事务的结果，数据通过日志能够保持事务的持久性。</p><h3 id="数据库的设计" tabindex="-1">数据库的设计 <a class="header-anchor" href="#数据库的设计" aria-label="Permalink to &quot;数据库的设计&quot;">​</a></h3>`,144),p=[t];function o(c,r,i,C,A,d){return a(),n("div",null,p)}const u=s(e,[["render",o]]);export{h as __pageData,u as default};
