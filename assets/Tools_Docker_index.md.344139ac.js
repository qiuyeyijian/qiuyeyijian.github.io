import{_ as s,c as a,o as n,a as l}from"./app.b6aa35fe.js";const C=JSON.parse('{"title":"Docker","description":"","frontmatter":{},"headers":[{"level":2,"title":"Docker \u57FA\u672C\u64CD\u4F5C","slug":"docker-\u57FA\u672C\u64CD\u4F5C","link":"#docker-\u57FA\u672C\u64CD\u4F5C","children":[{"level":3,"title":"\u5B89\u88C5 Docker","slug":"\u5B89\u88C5-docker","link":"#\u5B89\u88C5-docker","children":[]},{"level":3,"title":"Docker \u7684\u4E2D\u592E\u4ED3\u5E93","slug":"docker-\u7684\u4E2D\u592E\u4ED3\u5E93","link":"#docker-\u7684\u4E2D\u592E\u4ED3\u5E93","children":[]},{"level":3,"title":"\u955C\u50CF\u7684\u64CD\u4F5C","slug":"\u955C\u50CF\u7684\u64CD\u4F5C","link":"#\u955C\u50CF\u7684\u64CD\u4F5C","children":[]},{"level":3,"title":"\u5BB9\u5668\u7684\u64CD\u4F5C","slug":"\u5BB9\u5668\u7684\u64CD\u4F5C","link":"#\u5BB9\u5668\u7684\u64CD\u4F5C","children":[]}]},{"level":2,"title":"Docker \u7684\u5E94\u7528","slug":"docker-\u7684\u5E94\u7528","link":"#docker-\u7684\u5E94\u7528","children":[{"level":3,"title":"\u6570\u636E\u5377\u57FA\u672C\u64CD\u4F5C","slug":"\u6570\u636E\u5377\u57FA\u672C\u64CD\u4F5C","link":"#\u6570\u636E\u5377\u57FA\u672C\u64CD\u4F5C","children":[]},{"level":3,"title":"\u6570\u636E\u5377\u5E94\u7528","slug":"\u6570\u636E\u5377\u5E94\u7528","link":"#\u6570\u636E\u5377\u5E94\u7528","children":[]}]},{"level":2,"title":"Docker \u81EA\u5B9A\u4E49\u955C\u50CF","slug":"docker-\u81EA\u5B9A\u4E49\u955C\u50CF","link":"#docker-\u81EA\u5B9A\u4E49\u955C\u50CF","children":[]},{"level":2,"title":"Docker-Compose","slug":"docker-compose","link":"#docker-compose","children":[{"level":3,"title":"\u4E0B\u8F7D\u5B89\u88C5","slug":"\u4E0B\u8F7D\u5B89\u88C5","link":"#\u4E0B\u8F7D\u5B89\u88C5","children":[]},{"level":3,"title":"\u7F16\u5199\u914D\u7F6E\u6587\u4EF6","slug":"\u7F16\u5199\u914D\u7F6E\u6587\u4EF6","link":"#\u7F16\u5199\u914D\u7F6E\u6587\u4EF6","children":[]},{"level":3,"title":"\u4F7F\u7528 docker-compose \u547D\u540D\u7BA1\u7406\u5BB9\u5668","slug":"\u4F7F\u7528-docker-compose-\u547D\u540D\u7BA1\u7406\u5BB9\u5668","link":"#\u4F7F\u7528-docker-compose-\u547D\u540D\u7BA1\u7406\u5BB9\u5668","children":[]},{"level":3,"title":"docker-compose \u914D\u7F6E Dockfile \u4F7F\u7528","slug":"docker-compose-\u914D\u7F6E-dockfile-\u4F7F\u7528","link":"#docker-compose-\u914D\u7F6E-dockfile-\u4F7F\u7528","children":[]}]},{"level":2,"title":"Docker \u4E00\u4E9B\u95EE\u9898","slug":"docker-\u4E00\u4E9B\u95EE\u9898","link":"#docker-\u4E00\u4E9B\u95EE\u9898","children":[{"level":3,"title":"\u8FDB\u5165\u5BB9\u5668\u5185\u90E8","slug":"\u8FDB\u5165\u5BB9\u5668\u5185\u90E8","link":"#\u8FDB\u5165\u5BB9\u5668\u5185\u90E8","children":[]},{"level":3,"title":"\u5BB9\u5668\u81EA\u542F\u52A8","slug":"\u5BB9\u5668\u81EA\u542F\u52A8","link":"#\u5BB9\u5668\u81EA\u542F\u52A8","children":[]}]},{"level":2,"title":"Docker CI, CD","slug":"docker-ci-cd","link":"#docker-ci-cd","children":[]},{"level":2,"title":"MYSQL","slug":"mysql","link":"#mysql","children":[]},{"level":2,"title":"Tomcat","slug":"tomcat","link":"#tomcat","children":[]}],"relativePath":"Tools/Docker/index.md"}'),e={name:"Tools/Docker/index.md"},o=l(`<h1 id="docker" tabindex="-1">Docker <a class="header-anchor" href="#docker" aria-hidden="true">#</a></h1><h2 id="docker-\u57FA\u672C\u64CD\u4F5C" tabindex="-1">Docker \u57FA\u672C\u64CD\u4F5C <a class="header-anchor" href="#docker-\u57FA\u672C\u64CD\u4F5C" aria-hidden="true">#</a></h2><h3 id="\u5B89\u88C5-docker" tabindex="-1">\u5B89\u88C5 Docker <a class="header-anchor" href="#\u5B89\u88C5-docker" aria-hidden="true">#</a></h3><div class="language-bash"><button class="copy"></button><span class="lang">bash</span><pre><code><span class="line"><span style="color:#676E95;"># step 1: \u5B89\u88C5\u5FC5\u8981\u7684\u4E00\u4E9B\u7CFB\u7EDF\u5DE5\u5177</span></span>
<span class="line"><span style="color:#A6ACCD;">sudo yum install -y yum-utils device-mapper-persistent-data lvm2</span></span>
<span class="line"><span style="color:#676E95;"># Step 2: \u6DFB\u52A0\u8F6F\u4EF6\u6E90\u4FE1\u606F</span></span>
<span class="line"><span style="color:#A6ACCD;">sudo yum-config-manager --add-repo https://mirrors.aliyun.com/docker-ce/linux/centos/docker-ce.repo</span></span>
<span class="line"><span style="color:#676E95;"># Step 3: \u66F4\u65B0\u5E76\u5B89\u88C5Docker-CE</span></span>
<span class="line"><span style="color:#A6ACCD;">dnf install https://download.docker.com/linux/centos/7/x86_64/stable/Packages/containerd.io-1.2.6-3.3.el7.x86_64.rpm</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">sudo yum makecache</span></span>
<span class="line"><span style="color:#A6ACCD;">sudo yum -y install docker-ce</span></span>
<span class="line"><span style="color:#676E95;"># Step 4: \u5F00\u542FDocker\u670D\u52A1</span></span>
<span class="line"><span style="color:#A6ACCD;">sudo systemctl start docker</span></span>
<span class="line"><span style="color:#676E95;"># Step 5: \u8BBE\u7F6E\u5F00\u673A\u81EA\u542F\u52A8</span></span>
<span class="line"><span style="color:#A6ACCD;">sudo systemctl </span><span style="color:#82AAFF;">enable</span><span style="color:#A6ACCD;"> docker</span></span>
<span class="line"><span style="color:#676E95;"># Step 6: \u6D4B\u8BD5</span></span>
<span class="line"><span style="color:#A6ACCD;">docker run hello-world</span></span>
<span class="line"></span>
<span class="line"></span></code></pre></div><h3 id="docker-\u7684\u4E2D\u592E\u4ED3\u5E93" tabindex="-1">Docker \u7684\u4E2D\u592E\u4ED3\u5E93 <a class="header-anchor" href="#docker-\u7684\u4E2D\u592E\u4ED3\u5E93" aria-hidden="true">#</a></h3><blockquote><ol><li><p>Docker \u5B98\u65B9\u7684\u4E2D\u592E\u4ED3\u5E93\uFF1A\u8FD9\u4E2A\u4ED3\u5E93\u662F\u955C\u50CF\u6700\u5168\u7684\uFF0C\u4F46\u662F\u4E0B\u8F7D\u901F\u5EA6\u8F83\u6162</p><p><a href="https://hub.docker.com/" target="_blank" rel="noreferrer">https://hub.docker.com/</a></p></li><li><p>\u56FD\u5185\u955C\u50CF\u7F51\u7AD9\uFF1A\u7F51\u6613\u8702\u5DE2\uFF0Cdaocloud...</p><p><a href="https://c.163yun.com/hub/" target="_blank" rel="noreferrer">https://c.163yun.com/hub/</a></p><p><a href="http://hub.daocloud.io" target="_blank" rel="noreferrer">http://hub.daocloud.io</a> (\u63A8\u8350\u4F7F\u7528)</p></li><li><p>\u5728\u516C\u53F8\u5185\u90E8\u4F1A\u91C7\u7528\u79C1\u670D\u7684\u65B9\u5F0F\u62C9\u53BB\u955C\u50CF\uFF08\u6DFB\u52A0\u914D\u7F6E\uFF09</p></li></ol></blockquote><h3 id="\u955C\u50CF\u7684\u64CD\u4F5C" tabindex="-1">\u955C\u50CF\u7684\u64CD\u4F5C <a class="header-anchor" href="#\u955C\u50CF\u7684\u64CD\u4F5C" aria-hidden="true">#</a></h3><p>\u4E0B\u9762\u5747\u4F7F\u7528 DaoCloud \u955C\u50CF\u7AD9\u6765\u62C9\u53BB\u955C\u50CF</p><h4 id="_1-\u62C9\u53D6\u955C\u50CF\u5230\u672C\u5730" tabindex="-1">1. \u62C9\u53D6\u955C\u50CF\u5230\u672C\u5730 <a class="header-anchor" href="#_1-\u62C9\u53D6\u955C\u50CF\u5230\u672C\u5730" aria-hidden="true">#</a></h4><div class="language-sh"><button class="copy"></button><span class="lang">sh</span><pre><code><span class="line"><span style="color:#A6ACCD;">docker pull \u955C\u50CF\u540D\u79F0</span><span style="color:#89DDFF;">[</span><span style="color:#A6ACCD;">:tag</span><span style="color:#89DDFF;">]</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;"># \u4E3E\u4E2A\u4F8B\u5B50, \u8FD9\u91CC\u4F7F\u7528daocloud\u955C\u50CF\u7AD9</span></span>
<span class="line"><span style="color:#A6ACCD;">docker pull daocloud.io/library/tomcat:8.5.15-jre8</span></span>
<span class="line"></span></code></pre></div><h4 id="_2-\u67E5\u770B\u672C\u5730\u5168\u90E8\u955C\u50CF" tabindex="-1">2. \u67E5\u770B\u672C\u5730\u5168\u90E8\u955C\u50CF <a class="header-anchor" href="#_2-\u67E5\u770B\u672C\u5730\u5168\u90E8\u955C\u50CF" aria-hidden="true">#</a></h4><div class="language-sh"><button class="copy"></button><span class="lang">sh</span><pre><code><span class="line"><span style="color:#A6ACCD;">docker images</span></span>
<span class="line"></span></code></pre></div><h4 id="_3-\u5220\u9664\u672C\u5730\u955C\u50CF" tabindex="-1">3. \u5220\u9664\u672C\u5730\u955C\u50CF <a class="header-anchor" href="#_3-\u5220\u9664\u672C\u5730\u955C\u50CF" aria-hidden="true">#</a></h4><div class="language-sh"><button class="copy"></button><span class="lang">sh</span><pre><code><span class="line"><span style="color:#A6ACCD;">docker rmi \u955C\u50CF\u7684\u6807\u8BC6</span></span>
<span class="line"></span></code></pre></div><h4 id="_4-\u955C\u50CF\u7684\u5BFC\u5165\u5BFC\u51FA\uFF08\u4E0D\u89C4\u8303\uFF09" tabindex="-1">4. \u955C\u50CF\u7684\u5BFC\u5165\u5BFC\u51FA\uFF08\u4E0D\u89C4\u8303\uFF09 <a class="header-anchor" href="#_4-\u955C\u50CF\u7684\u5BFC\u5165\u5BFC\u51FA\uFF08\u4E0D\u89C4\u8303\uFF09" aria-hidden="true">#</a></h4><div class="language-sh"><button class="copy"></button><span class="lang">sh</span><pre><code><span class="line"><span style="color:#676E95;"># \u5C06\u672C\u5730\u7684\u955C\u50CF\u5BFC\u51FA</span></span>
<span class="line"><span style="color:#A6ACCD;">docker save -o \u5BFC\u51FA\u8DEF\u5F84 \u955C\u50CFid</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;"># \u52A0\u8F7D\u672C\u5730\u7684\u955C\u50CF\u6587\u4EF6</span></span>
<span class="line"><span style="color:#A6ACCD;">docker load -i \u955C\u50CF\u6587\u4EF6</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;"># \u4FEE\u6539\u955C\u50CF\u540D\u79F0</span></span>
<span class="line"><span style="color:#A6ACCD;">docker tag \u955C\u50CFid \u65B0\u955C\u50CF\u540D\u79F0:\u7248\u672C</span></span>
<span class="line"></span></code></pre></div><h3 id="\u5BB9\u5668\u7684\u64CD\u4F5C" tabindex="-1">\u5BB9\u5668\u7684\u64CD\u4F5C <a class="header-anchor" href="#\u5BB9\u5668\u7684\u64CD\u4F5C" aria-hidden="true">#</a></h3><h4 id="_1-\u8FD0\u884C\u5BB9\u5668" tabindex="-1">1. \u8FD0\u884C\u5BB9\u5668 <a class="header-anchor" href="#_1-\u8FD0\u884C\u5BB9\u5668" aria-hidden="true">#</a></h4><div class="language-sh"><button class="copy"></button><span class="lang">sh</span><pre><code><span class="line"><span style="color:#676E95;"># \u7B80\u5355\u64CD\u4F5C</span></span>
<span class="line"><span style="color:#A6ACCD;">docker run \u955C\u50CF\u6807\u8BC6 </span><span style="color:#89DDFF;">|</span><span style="color:#A6ACCD;"> \u955C\u50CF\u540D\u79F0</span><span style="color:#89DDFF;">[</span><span style="color:#A6ACCD;">:tag</span><span style="color:#89DDFF;">]</span></span>
<span class="line"></span></code></pre></div><div class="language-sh"><button class="copy"></button><span class="lang">sh</span><pre><code><span class="line"><span style="color:#676E95;"># \u5E38\u7528\u64CD\u4F5C</span></span>
<span class="line"><span style="color:#A6ACCD;">docker run -d -p \u5BBF\u4E3B\u673A\u7AEF\u53E3:\u5BB9\u5668\u7AEF\u53E3 --name \u5BB9\u5668\u540D\u79F0 \u955C\u50CF\u540D\u79F0</span><span style="color:#89DDFF;">|</span><span style="color:#A6ACCD;">\u955C\u50CF\u6807\u8BC6</span><span style="color:#89DDFF;">[</span><span style="color:#A6ACCD;">:tag</span><span style="color:#89DDFF;">]</span></span>
<span class="line"></span></code></pre></div><blockquote><ul><li>-d =&gt; \u4EE3\u8868\u540E\u53F0\u8FD0\u884C\u5BB9\u5668</li><li>-p \u5BBF\u4E3B\u673A\u7AEF\u53E3:\u5BB9\u5668\u7AEF\u53E3 =&gt;\u3000\u5F53\u524D Linux \u7269\u7406\u673A\u7AEF\u53E3\u5230\u5BB9\u5668\u7AEF\u53E3\u7684\u6620\u5C04</li><li>--name \u5BB9\u5668\u540D\u79F0 =&gt; \u4E3A\u5F53\u524D\u8981\u8FD0\u884C\u7684\u5BB9\u5668\u8D77\u4E2A\u540D\u5B57</li></ul></blockquote><h4 id="_2-\u67E5\u770B\u6B63\u5728\u8FD0\u884C\u7684\u5BB9\u5668" tabindex="-1">2. \u67E5\u770B\u6B63\u5728\u8FD0\u884C\u7684\u5BB9\u5668 <a class="header-anchor" href="#_2-\u67E5\u770B\u6B63\u5728\u8FD0\u884C\u7684\u5BB9\u5668" aria-hidden="true">#</a></h4><div class="language-sh"><button class="copy"></button><span class="lang">sh</span><pre><code><span class="line"><span style="color:#A6ACCD;">docker ps </span><span style="color:#89DDFF;">[</span><span style="color:#A6ACCD;">-qa</span><span style="color:#89DDFF;">]</span></span>
<span class="line"></span></code></pre></div><blockquote><ul><li>-a =&gt; \u67E5\u770B\u5168\u90E8\u5BB9\u5668\uFF0C\u5305\u62EC\u6CA1\u6709\u8FD0\u884C\u7684</li><li>-q =&gt; \u53EA\u67E5\u770B\u5BB9\u5668\u5F97\u5230\u7684\u6807\u8BC6</li></ul></blockquote><h4 id="_3-\u67E5\u770B\u5BB9\u5668\u65E5\u5FD7" tabindex="-1">3. \u67E5\u770B\u5BB9\u5668\u65E5\u5FD7 <a class="header-anchor" href="#_3-\u67E5\u770B\u5BB9\u5668\u65E5\u5FD7" aria-hidden="true">#</a></h4><div class="language-sh"><button class="copy"></button><span class="lang">sh</span><pre><code><span class="line"><span style="color:#A6ACCD;">docker logs -f \u5BB9\u5668id</span></span>
<span class="line"></span></code></pre></div><h4 id="_4-\u8FDB\u5165\u5BB9\u5668\u5185\u90E8" tabindex="-1">4. \u8FDB\u5165\u5BB9\u5668\u5185\u90E8 <a class="header-anchor" href="#_4-\u8FDB\u5165\u5BB9\u5668\u5185\u90E8" aria-hidden="true">#</a></h4><div class="language-sh"><button class="copy"></button><span class="lang">sh</span><pre><code><span class="line"><span style="color:#A6ACCD;">docker </span><span style="color:#82AAFF;">exec</span><span style="color:#A6ACCD;"> -it \u5BB9\u5668id /bin/bash</span></span>
<span class="line"></span></code></pre></div><h4 id="_5-\u5220\u9664\u5BB9\u5668" tabindex="-1">5. \u5220\u9664\u5BB9\u5668 <a class="header-anchor" href="#_5-\u5220\u9664\u5BB9\u5668" aria-hidden="true">#</a></h4><p>\u5220\u9664\u5BB9\u5668\u524D\u8BF7\u5148\u505C\u6B62\u5BB9\u5668</p><div class="language-sh"><button class="copy"></button><span class="lang">sh</span><pre><code><span class="line"><span style="color:#676E95;"># 1. \u505C\u6B62\u6307\u5B9A\u5BB9\u5668</span></span>
<span class="line"><span style="color:#A6ACCD;">docker stop \u5BB9\u5668id</span></span>
<span class="line"><span style="color:#676E95;"># 2. \u505C\u6B62\u6240\u6709\u5BB9\u5668</span></span>
<span class="line"><span style="color:#A6ACCD;">docker stop </span><span style="color:#89DDFF;">$(</span><span style="color:#C3E88D;">docker ps -qa</span><span style="color:#89DDFF;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;"># 3. \u5220\u9664\u6307\u5B9A\u5BB9\u5668</span></span>
<span class="line"><span style="color:#A6ACCD;">docker rm \u5BB9\u5668id</span></span>
<span class="line"><span style="color:#676E95;"># 4. \u5220\u9664\u5168\u90E8\u5BB9\u5668</span></span>
<span class="line"><span style="color:#A6ACCD;">docker rm </span><span style="color:#89DDFF;">$(</span><span style="color:#C3E88D;">docker ps -qa</span><span style="color:#89DDFF;">)</span></span>
<span class="line"></span></code></pre></div><h4 id="_6-\u542F\u52A8\u5BB9\u5668" tabindex="-1">6. \u542F\u52A8\u5BB9\u5668 <a class="header-anchor" href="#_6-\u542F\u52A8\u5BB9\u5668" aria-hidden="true">#</a></h4><div class="language-sh"><button class="copy"></button><span class="lang">sh</span><pre><code><span class="line"><span style="color:#A6ACCD;">docker start \u5BB9\u5668id</span></span>
<span class="line"></span></code></pre></div><h2 id="docker-\u7684\u5E94\u7528" tabindex="-1">Docker \u7684\u5E94\u7528 <a class="header-anchor" href="#docker-\u7684\u5E94\u7528" aria-hidden="true">#</a></h2><div class="language-sh"><button class="copy"></button><span class="lang">sh</span><pre><code><span class="line"><span style="color:#676E95;">#\u53EF\u4EE5\u901A\u8FC7\u547D\u4EE4\u5C06\u5BBF\u4E3B\u673A\u7684\u5185\u5BB9\u590D\u5236\u5230\u5BB9\u5668\u5185\u90E8</span></span>
<span class="line"><span style="color:#A6ACCD;">docker cp \u6587\u4EF6\u540D\u79F0 \u5BB9\u5668id:\u5BB9\u5668\u5185\u90E8\u8DEF\u5F84</span></span>
<span class="line"></span></code></pre></div><h3 id="\u6570\u636E\u5377\u57FA\u672C\u64CD\u4F5C" tabindex="-1">\u6570\u636E\u5377\u57FA\u672C\u64CD\u4F5C <a class="header-anchor" href="#\u6570\u636E\u5377\u57FA\u672C\u64CD\u4F5C" aria-hidden="true">#</a></h3><blockquote><p>\u4E3A\u4E86\u90E8\u7F72 SSM \u7684\u5DE5\u7A0B\uFF0C\u9700\u8981\u4F7F\u7528\u5230 cp \u547D\u4EE4\u5C06\u5BBF\u4E3B\u673A\u5185\u7684 war \u5305\u590D\u5236\u5230\u5BB9\u5668\u5185\u90E8\u3002</p><p>\u6570\u636E\u5377\uFF1A\u5C06\u5BBF\u4E3B\u673A\u7684\u4E00\u4E2A\u76EE\u5F55\u6620\u5C04\u5230\u5BB9\u5668\u7684\u4E00\u4E2A\u76EE\u5F55\u4E2D\u3002</p><p>\u53EF\u4EE5\u5728\u5BBF\u4E3B\u673A\u4E2D\u64CD\u4F5C\u76EE\u5F55\u4E2D\u7684\u5185\u5BB9\uFF0C\u90A3\u4E48\u5BB9\u5668\u5185\u90E8\u6620\u5C04\u7684\u6587\u4EF6\u4E5F\u4F1A\u8DDF\u7740\u4E00\u8D77\u6539\u53D8\u3002</p></blockquote><h4 id="_1-\u521B\u5EFA\u6570\u636E\u5377" tabindex="-1">1. \u521B\u5EFA\u6570\u636E\u5377 <a class="header-anchor" href="#_1-\u521B\u5EFA\u6570\u636E\u5377" aria-hidden="true">#</a></h4><div class="language-sh"><button class="copy"></button><span class="lang">sh</span><pre><code><span class="line"><span style="color:#676E95;"># \u521B\u5EFA\u6570\u636E\u5377\u540E\uFF0C\u9ED8\u8BA4\u4F1A\u5B58\u653E\u5728\u4E00\u4E2A\u76EE\u5F55\u4E0B /var/lib/docker/volumes/\u6570\u636E\u5377\u540D\u79F0/_data</span></span>
<span class="line"><span style="color:#A6ACCD;">docker volume create \u6570\u636E\u5377\u540D\u79F0</span></span>
<span class="line"></span></code></pre></div><h4 id="_2-\u67E5\u770B\u6570\u636E\u5377\u7684\u8BE6\u7EC6\u4FE1\u606F" tabindex="-1">2. \u67E5\u770B\u6570\u636E\u5377\u7684\u8BE6\u7EC6\u4FE1\u606F <a class="header-anchor" href="#_2-\u67E5\u770B\u6570\u636E\u5377\u7684\u8BE6\u7EC6\u4FE1\u606F" aria-hidden="true">#</a></h4><div class="language-sh"><button class="copy"></button><span class="lang">sh</span><pre><code><span class="line"><span style="color:#A6ACCD;">docker volume inspect \u6570\u636E\u5377\u540D\u79F0</span></span>
<span class="line"></span></code></pre></div><h4 id="_3-\u67E5\u770B\u5168\u90E8\u6570\u636E\u5377" tabindex="-1">3. \u67E5\u770B\u5168\u90E8\u6570\u636E\u5377 <a class="header-anchor" href="#_3-\u67E5\u770B\u5168\u90E8\u6570\u636E\u5377" aria-hidden="true">#</a></h4><div class="language-sh"><button class="copy"></button><span class="lang">sh</span><pre><code><span class="line"><span style="color:#A6ACCD;">docker volume ls</span></span>
<span class="line"></span></code></pre></div><h4 id="_4-\u5220\u9664\u6570\u636E\u5377" tabindex="-1">4. \u5220\u9664\u6570\u636E\u5377 <a class="header-anchor" href="#_4-\u5220\u9664\u6570\u636E\u5377" aria-hidden="true">#</a></h4><div class="language-sh"><button class="copy"></button><span class="lang">sh</span><pre><code><span class="line"><span style="color:#A6ACCD;">docker volume rm \u6570\u636E\u5377\u540D\u79F0</span></span>
<span class="line"></span></code></pre></div><h3 id="\u6570\u636E\u5377\u5E94\u7528" tabindex="-1">\u6570\u636E\u5377\u5E94\u7528 <a class="header-anchor" href="#\u6570\u636E\u5377\u5E94\u7528" aria-hidden="true">#</a></h3><p>\u5F53\u4F60\u6620\u5C04\u6570\u636E\u5377\u662F\uFF0C\u5982\u679C\u6570\u636E\u5377\u4E0D\u5B58\u5728\uFF0Cdocker \u4F1A\u5E2E\u4F60\u81EA\u52A8\u521B\u5EFA\u3002\u5C06\u5BB9\u5668\u5185\u90E8\u81EA\u5E26\u7684\u6587\u4EF6\uFF0C\u5B58\u50A8\u5728\u9ED8\u8BA4\u7684\u5B58\u653E\u8DEF\u5F84\u4E2D\u3002</p><div class="language-sh"><button class="copy"></button><span class="lang">sh</span><pre><code><span class="line"><span style="color:#A6ACCD;">docker run -v \u6570\u636E\u5377\u540D\u79F0:\u5BB9\u5668\u5185\u90E8\u7684\u8DEF\u5F84 \u955C\u50CFid</span></span>
<span class="line"></span></code></pre></div><p>\u5982\u679C\u6307\u5B9A\u4E00\u4E2A\u8DEF\u5F84\u4F5C\u4E3A\u6570\u636E\u5377\u7684\u5B58\u653E\u4F4D\u7F6E\uFF0C\u8FD9\u4E2A\u8DEF\u5F84\u4E0B\u662F\u7A7A\u7684\u3002</p><div class="language-sh"><button class="copy"></button><span class="lang">sh</span><pre><code><span class="line"><span style="color:#A6ACCD;">docker run -v \u8DEF\u5F84:\u5BB9\u5668\u5185\u90E8\u7684\u8DEF\u5F84 \u955C\u50CFid</span></span>
<span class="line"></span></code></pre></div><h2 id="docker-\u81EA\u5B9A\u4E49\u955C\u50CF" tabindex="-1">Docker \u81EA\u5B9A\u4E49\u955C\u50CF <a class="header-anchor" href="#docker-\u81EA\u5B9A\u4E49\u955C\u50CF" aria-hidden="true">#</a></h2><blockquote><p>\u4E2D\u592E\u4ED3\u5E93\u4E0A\u7684\u955C\u50CF\uFF0C\u4E5F\u662F Docker \u7684\u7528\u6237\u81EA\u5DF1\u4E0A\u4F20\u7684</p></blockquote><p><strong>1. \u521B\u5EFA\u4E00\u4E2A Dockerfile \u6587\u4EF6\uFF0C\u5E76\u4E14\u81EA\u5B9A\u4E49\u955C\u50CF\u4FE1\u606F</strong></p><div class="language-sh"><button class="copy"></button><span class="lang">sh</span><pre><code><span class="line"><span style="color:#A6ACCD;">vim Dockerfile</span></span>
<span class="line"></span></code></pre></div><blockquote><p>Dockerfile \u6587\u4EF6\u4E2D\u5E38\u7528\u7684\u5185\u5BB9</p><ul><li>from =&gt; \u6307\u5B9A\u5F53\u524D\u81EA\u5B9A\u4E49\u955C\u50CF\u4F9D\u8D56\u7684\u73AF\u5883</li><li>copy =&gt; \u5C06\u76F8\u5BF9\u8DEF\u5F84\u4E0B\u7684\u5185\u5BB9\u590D\u5236\u5230\u81EA\u5B9A\u4E49\u955C\u50CF\u4E2D</li><li>workdir =&gt; \u58F0\u660E\u955C\u50CF\u7684\u9ED8\u8BA4\u5DE5\u4F5C\u76EE\u5F55</li><li>cmd =&gt; \u9700\u8981\u6267\u884C\u7684\u547D\u4EE4\uFF08\u5728 workdir \u4E0B\u6267\u884C\u7684\uFF0Ccmd \u53EF\u4EE5\u5199\u591A\u4E2A\uFF0C\u53EA\u4EE5\u6700\u540E\u4E00\u4E2A\u4E3A\u51C6\uFF09</li></ul></blockquote><div class="language-sh"><button class="copy"></button><span class="lang">sh</span><pre><code><span class="line"><span style="color:#676E95;"># \u4E3E\u4E2A\u6817\u5B50 vim /root/workspace/Dockerfile</span></span>
<span class="line"><span style="color:#A6ACCD;">from daocloud.io/library/tomcat:8.5.15-jre8</span></span>
<span class="line"><span style="color:#A6ACCD;">copy /root/workspace/ssm.war /usr/local/tomcat/webapps</span></span>
<span class="line"></span></code></pre></div><div class="language-sh"><button class="copy"></button><span class="lang">sh</span><pre><code><span class="line"><span style="color:#676E95;"># \u5199\u597DDockerfile\u6587\u4EF6\u540E\uFF0C\u5728Dockerfile\u6587\u4EF6\u76EE\u5F55\u4E0B\uFF0C\u8FD0\u884C\u547D\u4EE4\u5236\u4F5C\u955C\u50CF</span></span>
<span class="line"><span style="color:#A6ACCD;">docker build -t\u3000\u955C\u50CF\u540D\u79F0:</span><span style="color:#89DDFF;">[</span><span style="color:#A6ACCD;">tag</span><span style="color:#89DDFF;">]</span><span style="color:#A6ACCD;"> /root/workspace/Dockerfile</span></span>
<span class="line"></span></code></pre></div><h2 id="docker-compose" tabindex="-1">Docker-Compose <a class="header-anchor" href="#docker-compose" aria-hidden="true">#</a></h2><blockquote><ul><li><p>\u4E4B\u524D\u8FD0\u884C\u4E00\u4E2A\u955C\u50CF\uFF0C\u9700\u8981\u6DFB\u52A0\u5927\u91CF\u53C2\u6570\u3002\u53EF\u4EE5\u901A\u8FC7 Docker-Compose \u7F16\u5199\u8FD9\u4E9B\u53C2\u6570</p></li><li><p>Docker-Compose \u53EF\u4EE5\u5E2E\u52A9\u6211\u4EEC\u6279\u91CF\u5730\u7BA1\u7406\u5BB9\u5668\uFF0C\u53EA\u9700\u8981\u901A\u8FC7\u4E00\u4E2A<code>docker-compose.yml</code>\u6587\u4EF6\u53BB\u7EF4\u62A4\u5373\u53EF</p></li></ul></blockquote><h3 id="\u4E0B\u8F7D\u5B89\u88C5" tabindex="-1">\u4E0B\u8F7D\u5B89\u88C5 <a class="header-anchor" href="#\u4E0B\u8F7D\u5B89\u88C5" aria-hidden="true">#</a></h3><p><strong>1. \u53BB GitHub \u4E0B\u8F7D Docker-Compose</strong></p><p><a href="https://github.com/docker/compose/releases/download/1.26.2/docker-compose-Linux-x86_64" target="_blank" rel="noreferrer">docker-compose-Linux-x86_64</a></p><p><strong>2. \u8D4B\u4E88\u53EF\u6267\u884C\u6743\u9650</strong></p><div class="language-sh"><button class="copy"></button><span class="lang">sh</span><pre><code><span class="line"><span style="color:#676E95;"># \u91CD\u547D\u540D\uFF0C\u65B9\u4FBF\u63A5\u4E0B\u6765\u7684\u64CD\u4F5C</span></span>
<span class="line"><span style="color:#A6ACCD;">mv docker-compose-Linux-x86_64 docker-compose</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;"># \u8D4B\u4E88\u53EF\u6267\u884C\u6743\u9650</span></span>
<span class="line"><span style="color:#A6ACCD;">chmod 755 docker-compose</span></span>
<span class="line"></span></code></pre></div><p><strong>3. \u914D\u7F6E\u73AF\u5883\u53D8\u91CF</strong></p><div class="language-sh"><button class="copy"></button><span class="lang">sh</span><pre><code><span class="line"><span style="color:#676E95;"># \u5C06docker-compose\u6587\u4EF6\u79FB\u52A8\u5230 /usr/local/bin</span></span>
<span class="line"><span style="color:#A6ACCD;">mv docker-compose /usr/local/bin</span></span>
<span class="line"></span>
<span class="line"><span style="color:#82AAFF;">echo</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">export PATH=</span><span style="color:#89DDFF;">$</span><span style="color:#A6ACCD;">PATH</span><span style="color:#C3E88D;">:/usr/local/bin</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&gt;&gt;</span><span style="color:#A6ACCD;"> /etc/profile.d/docker-compose.sh</span></span>
<span class="line"><span style="color:#A6ACCD;">chmod 755 /etc/profile.d/docker-compose.sh</span></span>
<span class="line"></span></code></pre></div><h3 id="\u7F16\u5199\u914D\u7F6E\u6587\u4EF6" tabindex="-1">\u7F16\u5199\u914D\u7F6E\u6587\u4EF6 <a class="header-anchor" href="#\u7F16\u5199\u914D\u7F6E\u6587\u4EF6" aria-hidden="true">#</a></h3><blockquote><p>yml \u6587\u4EF6\u4EE5 key:value \u65B9\u5F0F\u6765\u6307\u5B9A\u914D\u7F6E\u4FE1\u606F</p><p>\u591A\u4E2A\u914D\u7F6E\u4FE1\u606F\u4EE5\u6362\u884C+\u7A7A\u683C\u7F29\u8FDB\u7684\u65B9\u5F0F\u6765\u533A\u5206</p><p>\u5728 docker-compose.yml \u6587\u4EF6\u4E2D\uFF0C\u4E0D\u8981\u4F7F\u7528\u5236\u8868\u7B26</p></blockquote><div class="language-yaml"><button class="copy"></button><span class="lang">yaml</span><pre><code><span class="line"><span style="color:#F07178;">version</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">3.1</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#F07178;">services</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">mysql</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;"># \u670D\u52A1\u540D\u79F0</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">restart</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">always</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;">#\u4EE3\u8868\u53EA\u8981docker\u542F\u52A8\uFF0C\u90A3\u4E48\u8FD9\u4E2A\u5BB9\u5668\u5C31\u8DDF\u7740\u4E00\u8D77\u542F\u52A8</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">image</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">daocloud.io/library/mysql:5.7.6</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;">#\u6307\u5B9A\u955C\u50CF\u8DEF\u5F84</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">container_name</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">mysql</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;"># \u6307\u5B9A\u5BB9\u5668\u540D\u79F0</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">ports</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">3306:3306</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;"># \u6307\u5B9A\u7AEF\u53E3\u53F7\u7684\u6620\u5C04\uFF0C\u53EF\u4EE5\u6307\u5B9A\u591A\u4E2A\uFF0C\u5728\u4E0B\u9762\u7EE7\u7EED\u6DFB\u52A0\u5373\u53EF</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">environment</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#F07178;">MYSQL_ROOT_PASSWORD</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">root</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;"># \u6307\u5B9Amysql\u7684root\u7528\u6237\u7684\u767B\u5F55\u5BC6\u7801</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#F07178;">TZ</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">Asia/Shanghai</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;"># \u6307\u5B9A\u65F6\u533A</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">tomcat</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">restart</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">always</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">image</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">daocloud.io/library/tomcat:8.5.15-jre8</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">container_name</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">tomcat</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">ports</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">8080:8080</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">environment</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#F07178;">TZ</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">Asia/Shanghai</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">volumes</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">/opt/docker/tomcat/webapps:/usr/local/tomcat/webapps</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">/opt/docker/tomcat/logs:/usr/local/tomcat/logs</span></span>
<span class="line"></span></code></pre></div><h3 id="\u4F7F\u7528-docker-compose-\u547D\u540D\u7BA1\u7406\u5BB9\u5668" tabindex="-1">\u4F7F\u7528 docker-compose \u547D\u540D\u7BA1\u7406\u5BB9\u5668 <a class="header-anchor" href="#\u4F7F\u7528-docker-compose-\u547D\u540D\u7BA1\u7406\u5BB9\u5668" aria-hidden="true">#</a></h3><blockquote><p>\u5728\u4F7F\u7528 docker-compose \u7684\u547D\u4EE4\u65F6\uFF0C\u9ED8\u8BA4\u4F1A\u5728\u5F53\u524D\u76EE\u5F55\u4E0B\u627E docker-compose.yml \u6587\u4EF6</p></blockquote><div class="language-yaml"><button class="copy"></button><span class="lang">yaml</span><pre><code><span class="line"><span style="color:#676E95;"># \u542F\u52A8\u7BA1\u7406\u7684\u5BB9\u5668</span></span>
<span class="line"><span style="color:#C3E88D;">docker-compose up -d</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;"># \u5173\u95ED\u5E76\u5220\u9664\u5BB9\u5668</span></span>
<span class="line"><span style="color:#C3E88D;">docker-compose down</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;"># \u5F00\u542F|\u5173\u95ED|\u91CD\u542F\u5DF2\u7ECF\u5B58\u5728\u7684\u6709docker-compose\u7EF4\u62A4\u7684\u5BB9\u5668</span></span>
<span class="line"><span style="color:#C3E88D;">docker-compose start|stop|resart</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;"># \u67E5\u770B\u5BB9\u5668</span></span>
<span class="line"><span style="color:#C3E88D;">docker-compose ps</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;">#\u67E5\u770B\u65E5\u5FD7</span></span>
<span class="line"><span style="color:#C3E88D;">docker-compose logs -f</span></span>
<span class="line"></span></code></pre></div><h3 id="docker-compose-\u914D\u7F6E-dockfile-\u4F7F\u7528" tabindex="-1">docker-compose \u914D\u7F6E Dockfile \u4F7F\u7528 <a class="header-anchor" href="#docker-compose-\u914D\u7F6E-dockfile-\u4F7F\u7528" aria-hidden="true">#</a></h3><blockquote><p>\u4F7F\u7528 docker-compose.yml \u6587\u4EF6\u4EE5\u53CA Dockerfile \u6587\u4EF6\u5728\u751F\u6210\u81EA\u5B9A\u4E49\u955C\u50CF\u7684\u540C\u65F6\u542F\u52A8\u5F53\u524D\u955C\u50CF\uFF0C\u5E76\u4E14\u53C8 docker-compose \u53BB\u7BA1\u7406\u5BB9\u5668</p></blockquote><div class="language-yaml"><button class="copy"></button><span class="lang">yaml</span><pre><code><span class="line"><span style="color:#676E95;"># docker-compose.yml \u6587\u4EF6</span></span>
<span class="line"><span style="color:#F07178;">version</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">3.1</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#F07178;">services</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">test</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">restart</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">always</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">build</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#F07178;">context</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">./</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#F07178;">dockerfile</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">Dockerfile</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">image</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">test:1.0.1</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">container_name</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">ssm</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">ports</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">8081:8080</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">environment</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#F07178;">TZ</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">Asia/Shanghai</span></span>
<span class="line"></span></code></pre></div><div class="language-sh"><button class="copy"></button><span class="lang">sh</span><pre><code><span class="line"><span style="color:#676E95;"># Dockerfile \u6587\u4EF6</span></span>
<span class="line"><span style="color:#A6ACCD;">from daocloud.io/library/tomcat:8.5.15-jre8</span></span>
<span class="line"><span style="color:#A6ACCD;">copy /root/workspace/ssm.war /usr/local/tomcat/webapps</span></span>
<span class="line"></span></code></pre></div><p>\u53EF\u4EE5\u76F4\u63A5\u542F\u52A8\u57FA\u4E8E docker-compose.yml \u4EE5\u53CA Dockerfile \u6587\u4EF6\u6784\u5EFA\u7684\u81EA\u5B9A\u4E49\u955C\u50CF</p><div class="language-sh"><button class="copy"></button><span class="lang">sh</span><pre><code><span class="line"><span style="color:#A6ACCD;">docker-compose up -d</span></span>
<span class="line"></span></code></pre></div><p>\u5982\u679C\u81EA\u5B9A\u4E49\u955C\u50CF\u4E0D\u5B58\u5728\uFF0C\u4F1A\u5E2E\u52A9\u6211\u4EEC\u6784\u5EFA\u51FA\u81EA\u5B9A\u4E49\u955C\u50CF\uFF0C\u5982\u679C\u81EA\u5B9A\u4E49\u955C\u50CF\u5DF2\u7ECF\u5B58\u5728\uFF0C\u4F1A\u76F4\u63A5\u8FD0\u884C\u8FD9\u4E2A\u81EA\u5B9A\u4E49\u955C\u50CF</p><p>\u5982\u679C\u9700\u8981\u91CD\u65B0\u6784\u5EFA\u81EA\u5B9A\u4E49\u955C\u50CF\uFF0C\u4F7F\u7528</p><div class="language-sh"><button class="copy"></button><span class="lang">sh</span><pre><code><span class="line"><span style="color:#676E95;"># \u53EA\u662F\u91CD\u65B0\u6784\u5EFA</span></span>
<span class="line"><span style="color:#A6ACCD;">docker-compose build</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;"># \u8FD0\u884C\u524D\u6784\u5EFA</span></span>
<span class="line"><span style="color:#A6ACCD;">docker-compose up -d --build</span></span>
<span class="line"></span></code></pre></div><h2 id="docker-\u4E00\u4E9B\u95EE\u9898" tabindex="-1">Docker \u4E00\u4E9B\u95EE\u9898 <a class="header-anchor" href="#docker-\u4E00\u4E9B\u95EE\u9898" aria-hidden="true">#</a></h2><h3 id="\u8FDB\u5165\u5BB9\u5668\u5185\u90E8" tabindex="-1">\u8FDB\u5165\u5BB9\u5668\u5185\u90E8 <a class="header-anchor" href="#\u8FDB\u5165\u5BB9\u5668\u5185\u90E8" aria-hidden="true">#</a></h3><div class="language-sh"><button class="copy"></button><span class="lang">sh</span><pre><code><span class="line"><span style="color:#A6ACCD;">//\u6839\u636E\u5BB9\u5668id \u8FDB\u5165\u5BF9\u5E94\u955C\u50CF\u6587\u4EF6\u5939, \u53EF\u4FEE\u6539\u76F8\u5173\u914D\u7F6E\u6587\u4EF6\uFF0C</span></span>
<span class="line"><span style="color:#A6ACCD;">docker </span><span style="color:#82AAFF;">exec</span><span style="color:#A6ACCD;"> -it \u5BB9\u5668id /bin/bash</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">//\u5982\u679C\u9700\u8981\u4EE5root \u7528\u6237\u7684\u8EAB\u4EFD\u8FDB\u5165\u5BB9\u5668\u5219\u4F7F\u7528</span></span>
<span class="line"><span style="color:#A6ACCD;">docker </span><span style="color:#82AAFF;">exec</span><span style="color:#A6ACCD;"> -it --user root \u5BB9\u5668id /bin/bash</span></span>
<span class="line"></span></code></pre></div><h3 id="\u5BB9\u5668\u81EA\u542F\u52A8" tabindex="-1">\u5BB9\u5668\u81EA\u542F\u52A8 <a class="header-anchor" href="#\u5BB9\u5668\u81EA\u542F\u52A8" aria-hidden="true">#</a></h3><p>\u8FD0\u884C\u5BB9\u5668\u7684\u65F6\u5019\uFF0C\u52A0\u4E0A <code>--restart=always</code> \u547D\u4EE4\u53EF\u4EE5\u4EE4\u5BB9\u5668\u81EA\u542F\u52A8</p><div class="language-sh"><button class="copy"></button><span class="lang">sh</span><pre><code><span class="line"><span style="color:#A6ACCD;">docker run -d --restart=always -p 10240:8080 -p 10241:50000 -v /var/jenkins_node:/var/jenkins_home -v /etc/localtime:/etc/localtime --name myjenkins jenkins/jenkins</span></span>
<span class="line"></span></code></pre></div><p>\u5982\u679C\u542F\u52A8\u5BB9\u5668\u7684\u65F6\u5019\u6CA1\u6709\u52A0 <code>--restart=always</code> \u547D\u4EE4\uFF0C\u53EF\u4EE5\u4F7F\u7528\u5982\u4E0B\u547D\u4EE4\uFF0C\u6765\u66F4\u65B0</p><div class="language-sh"><button class="copy"></button><span class="lang">sh</span><pre><code><span class="line"><span style="color:#A6ACCD;">sudo docker update --restart=always \u5BB9\u5668id</span></span>
<span class="line"></span></code></pre></div><p>\u4F7F\u7528 on-failure \u7B56\u7565\u65F6\uFF0C\u6307\u5B9A Docker \u5C06\u5C1D\u8BD5\u91CD\u65B0\u542F\u52A8\u5BB9\u5668\u7684\u6700\u5927\u6B21\u6570\u3002\u9ED8\u8BA4\u60C5\u51B5\u4E0B\uFF0CDocker \u5C06\u5C1D\u8BD5\u6C38\u8FDC\u91CD\u65B0\u542F\u52A8\u5BB9\u5668\u3002</p><div class="language-sh"><button class="copy"></button><span class="lang">sh</span><pre><code><span class="line"><span style="color:#A6ACCD;">sudo docker update --restart=on-failure:10 \u5BB9\u5668id		//\u6700\u5927\u91CD\u542F10\u6B21</span></span>
<span class="line"></span></code></pre></div><blockquote><p>--restart \u5177\u4F53\u53C2\u6570\u503C\u8BE6\u7EC6\u4FE1\u606F\uFF1A</p><ul><li><code>--restat=no</code> \u5BB9\u5668\u9000\u51FA\u65F6\uFF0C\u4E0D\u91CD\u542F\u5BB9\u5668</li><li><code>--restart=no-failure</code>\u53EA\u6709\u5728\u975E 0 \u72B6\u6001\u9000\u51FA\u65F6\u624D\u91CD\u65B0\u542F\u52A8\u5BB9\u5668\uFF1B</li><li><code>--restart=always</code> \u65E0\u8BBA\u9000\u51FA\u72B6\u6001\u662F\u5982\u4F55\uFF0C\u90FD\u91CD\u542F\u5BB9\u5668\uFF1B</li></ul></blockquote><h2 id="docker-ci-cd" tabindex="-1">Docker CI, CD <a class="header-anchor" href="#docker-ci-cd" aria-hidden="true">#</a></h2><h2 id="mysql" tabindex="-1">MYSQL <a class="header-anchor" href="#mysql" aria-hidden="true">#</a></h2><div class="language-bash"><button class="copy"></button><span class="lang">bash</span><pre><code><span class="line"><span style="color:#676E95;"># \u62C9\u53D6\u955C\u50CF</span></span>
<span class="line"><span style="color:#A6ACCD;">docker run -d -p 3306:3306 --name mysql --restart=always -e MYSQL_ROOT_PASSWORD=root daocloud.io/library/mysql:5.7.6</span></span>
<span class="line"></span></code></pre></div><h2 id="tomcat" tabindex="-1">Tomcat <a class="header-anchor" href="#tomcat" aria-hidden="true">#</a></h2><div class="language-"><button class="copy"></button><span class="lang"></span><pre><code><span class="line"><span style="color:#A6ACCD;">version: &quot;3.1&quot;</span></span>
<span class="line"><span style="color:#A6ACCD;">services:</span></span>
<span class="line"><span style="color:#A6ACCD;">  tomcat:</span></span>
<span class="line"><span style="color:#A6ACCD;">    restart: always</span></span>
<span class="line"><span style="color:#A6ACCD;">    image: daocloud.io/library/tomcat:8.5.15-jre8</span></span>
<span class="line"><span style="color:#A6ACCD;">    container_name: tomcat</span></span>
<span class="line"><span style="color:#A6ACCD;">    ports:</span></span>
<span class="line"><span style="color:#A6ACCD;">      - 8080:8080</span></span>
<span class="line"><span style="color:#A6ACCD;">    environment:</span></span>
<span class="line"><span style="color:#A6ACCD;">      TZ: Asia/Shanghai</span></span>
<span class="line"><span style="color:#A6ACCD;">    volumes:</span></span>
<span class="line"><span style="color:#A6ACCD;">      - /opt/docker/tomcat/webapps:/usr/local/tomcat/webapps</span></span>
<span class="line"><span style="color:#A6ACCD;">      - /opt/docker/tomcat/logs:/usr/local/tomcat/logs</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span></code></pre></div>`,97),p=[o];function c(r,t,i,d,y,D){return n(),a("div",null,p)}const A=s(e,[["render",c]]);export{C as __pageData,A as default};
